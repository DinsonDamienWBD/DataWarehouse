---
phase: 82-plugin-consolidation-audit
plan: 03
type: execute
wave: 3
depends_on: ["82-02"]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "Full solution builds with 0 errors and 0 warnings"
    - "All tests pass after merges"
    - "Plugin isolation is preserved -- no plugin-to-plugin ProjectReferences exist"
    - "Every remaining plugin registers correctly via assembly scanning"
    - "Strategy count post-merge matches pre-merge (no strategies lost)"
  artifacts: []
  key_links:
    - from: "Each plugin .csproj"
      to: "DataWarehouse.SDK only"
      via: "ProjectReference"
      pattern: "<ProjectReference.*SDK"
---

<objective>
Post-merge verification: full build, test suite, plugin isolation check, and strategy count validation. This is the final gate confirming Phase 82 is complete.

Purpose: Prove that consolidation did not break anything -- all strategies preserved, all tests pass, plugin isolation intact.

Output: Verified clean state with documented evidence.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/82-plugin-consolidation-audit/82-01-SUMMARY.md
@.planning/phases/82-plugin-consolidation-audit/82-02-SUMMARY.md
@.planning/phases/82-plugin-consolidation-audit/AUDIT-REPORT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Full build and test verification</name>
  <files></files>
  <action>
Run comprehensive verification suite:

1. **Full clean build**:
   ```bash
   dotnet build DataWarehouse.slnx -c Release 2>&1
   ```
   Must produce 0 errors and 0 warnings.

2. **Run all tests**:
   ```bash
   dotnet test DataWarehouse.slnx --no-build -c Release 2>&1
   ```
   All tests must pass. Record pass/fail/skip counts.

3. **Plugin isolation check** -- verify no plugin-to-plugin ProjectReferences:
   ```bash
   grep -r "ProjectReference.*Plugins\." Plugins/ --include="*.csproj"
   ```
   Every ProjectReference in a plugin .csproj must point to SDK only (DataWarehouse.SDK), never to another plugin. Flag any violations.

4. **Strategy count validation**:
   - Count total strategies across all plugins (grep for classes inheriting from *StrategyBase)
   - Compare against the pre-merge count from PLUGIN-CATALOG.md (2,968+)
   - The count must be equal or greater (no strategies lost)

5. **Assembly scanning verification** -- for each target plugin that received merged strategies, verify the strategies are discoverable:
   ```bash
   grep -r "DiscoverAndRegister\|RegisterStrategies" Plugins/DataWarehouse.Plugins.{TargetPlugin}/ --include="*.cs"
   ```

If any check fails, diagnose and fix the issue before completing.
  </action>
  <verify>
All 5 checks pass:
- Build: 0 errors, 0 warnings
- Tests: all pass (record exact count)
- Isolation: no plugin-to-plugin references
- Strategy count: >= 2,968
- Assembly scanning: all target plugins use DiscoverAndRegister
  </verify>
  <done>Phase 82 verification complete. Build clean, tests pass, plugin isolation preserved, all strategies accounted for. PLUG-05 and PLUG-06 requirements fully satisfied.</done>
</task>

</tasks>

<verification>
- `dotnet build DataWarehouse.slnx -c Release` exits 0 with no errors/warnings
- `dotnet test DataWarehouse.slnx` shows 0 failures
- No plugin .csproj references another plugin .csproj
- Strategy count >= 2,968 (pre-consolidation baseline)
</verification>

<success_criteria>
- Build: 0 errors, 0 warnings
- Tests: 100% pass rate
- Isolation: plugins reference only SDK
- Strategies: none lost in consolidation
- All 6 PLUG requirements (PLUG-01 through PLUG-06) satisfied across plans 01-03
</success_criteria>

<output>
After completion, create `.planning/phases/82-plugin-consolidation-audit/82-03-SUMMARY.md`
</output>
