---
phase: 50.1-feature-gap-closure
plan: 09
type: execute
wave: 3  # Waves are execution scheduling groups (max 2-3 concurrent), not dependency markers
depends_on: []
files_modified:
  - Plugins/DataWarehouse.Plugins.AirGapBridge/Core/AirGapTypes.cs
  - Plugins/DataWarehouse.Plugins.UltimateCompute/Strategies/IndustryFirst/HybridComputeStrategy.cs
  - Plugins/DataWarehouse.Plugins.AdaptiveTransport/AdaptiveTransportPlugin.cs
  - Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/ConnectorIntegration/ConnectorIntegrationStrategy.cs
autonomous: true
must_haves:
  truths:
    - "AirGap transfer manifest has config validation for checksums, manifest format"
    - "UltimateCompute 'Hybrid Compute' strategy has config validation and health checks"
    - "AdaptiveTransport core plugin has config validation and health checks"
    - "UltimateIntelligence ConnectorIntegration strategy has config validation and health checks"
    - "All strategies have shutdown, counters, error boundaries"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.AirGapBridge/Core/AirGapTypes.cs"
      provides: "Air-gap transfer manifest types with production infrastructure"
      contains: "TransferManifest"
    - path: "Plugins/DataWarehouse.Plugins.UltimateCompute/Strategies/IndustryFirst/HybridComputeStrategy.cs"
      provides: "Hybrid compute with production infrastructure"
      contains: "InitializeAsyncCore"
  key_links:
    - from: "Cross-domain strategies"
      to: "StrategyBase"
      via: "InitializeAsyncCore, GetCachedHealthAsync, IncrementCounter"
      pattern: "InitializeAsyncCore|GetCachedHealthAsync"
---

<objective>
Add production readiness infrastructure to cross-domain strategies: AirGap transfer manifest (Domain 09), UltimateCompute HybridComputeStrategy (Domain 11), AdaptiveTransport core (Domain 12), and UltimateIntelligence ConnectorIntegration (Domain 13).

Purpose: Push Domains 09, 11, 12, 13 features from 90% to 100%. These are single-feature domains where one key strategy or core component needs hardening.

Output: 4 files updated with production infrastructure.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/50.1-feature-gap-closure-push-all-80-99-features-to-100-production-readiness/50.1-RESEARCH.md

IMPORTANT — Feature identification:
- Domain 09 "Transfer manifest with checksums" (AirGapBridge) — Plugins/DataWarehouse.Plugins.AirGapBridge/Core/AirGapTypes.cs (manifest type definitions and validation)
- Domain 11 "Ultimate" (UltimateCompute) — Plugins/DataWarehouse.Plugins.UltimateCompute/Strategies/IndustryFirst/HybridComputeStrategy.cs (industry-first hybrid compute orchestration)
- Domain 12 "Adaptive" (AdaptiveTransport) — Plugins/DataWarehouse.Plugins.AdaptiveTransport/AdaptiveTransportPlugin.cs (core plugin with adaptive transport logic)
- Domain 13 "Ultimate" (UltimateIntelligence) — Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/ConnectorIntegration/ConnectorIntegrationStrategy.cs (connector integration strategy)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Production-harden AirGap manifest and UltimateCompute HybridCompute</name>
  <files>
    Plugins/DataWarehouse.Plugins.AirGapBridge/Core/AirGapTypes.cs
    Plugins/DataWarehouse.Plugins.UltimateCompute/Strategies/IndustryFirst/HybridComputeStrategy.cs
  </files>
  <action>
For AirGap transfer manifest (Plugins/DataWarehouse.Plugins.AirGapBridge/Core/AirGapTypes.cs):

This file contains TransferManifest type definitions. Add validation methods and production infrastructure:

1. **Validation method**: Add `public void Validate()` method to TransferManifest class that validates checksum algorithm (SHA-256/SHA-512/BLAKE2b), manifest format (JSON/binary), max transfer size (1MB-1TB), file paths are non-empty. Throw InvalidOperationException for invalid manifest state.
2. **Edge cases**: Handle empty transfer set, single-file transfer optimization, manifest size limits.

For UltimateCompute HybridComputeStrategy (Plugins/DataWarehouse.Plugins.UltimateCompute/Strategies/IndustryFirst/HybridComputeStrategy.cs):

1. **InitializeAsyncCore**: Validate max concurrent tasks, memory limit per task, execution timeout, runtime types (WASM/Container/Native mix). Throw ArgumentException for invalid values.
2. **Health check**: Check runtime availability, test minimal task execution. 60-second cache.
3. **ShutdownAsyncCore**: Cancel running tasks with timeout, release runtime resources.
4. **Counters**: `IncrementCounter("hybridcompute.task_submit")`, `IncrementCounter("hybridcompute.task_complete")`, `IncrementCounter("hybridcompute.task_fail")`.
5. **Error boundaries**: Handle OOM, timeout, sandbox escape detection.

DO NOT modify any transfer or compute logic.
  </action>
  <verify>
`dotnet build DataWarehouse.slnx --no-restore 2>&1 | tail -5` — 0 errors 0 warnings.
  </verify>
  <done>AirGap manifest and UltimateCompute HybridCompute have full production infrastructure. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Production-harden AdaptiveTransport and UltimateIntelligence ConnectorIntegration</name>
  <files>
    Plugins/DataWarehouse.Plugins.AdaptiveTransport/AdaptiveTransportPlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/ConnectorIntegration/ConnectorIntegrationStrategy.cs
  </files>
  <action>
For AdaptiveTransport core plugin (Plugins/DataWarehouse.Plugins.AdaptiveTransport/AdaptiveTransportPlugin.cs):

Add production infrastructure to the plugin's InitializeAsync and ShutdownAsync methods:

1. **InitializeAsync**: Validate transport protocols (TCP/UDP/QUIC/WebSocket), bandwidth estimation interval (100-10000ms), congestion algorithm (cubic/bbr/reno), max connections (1-1000). Throw ArgumentException for invalid values.
2. **Health check**: Check network interface availability via a health check method. 60-second cache.
3. **ShutdownAsync**: Close active connections gracefully, flush send buffers.
4. **Counters**: `IncrementCounter("transport.bytes_sent")`, `IncrementCounter("transport.bytes_received")`, `IncrementCounter("transport.protocol_switch")`.
5. **Error boundaries**: Handle network unreachable, connection reset, protocol negotiation failure.

For UltimateIntelligence ConnectorIntegration (Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/ConnectorIntegration/ConnectorIntegrationStrategy.cs):

1. **InitializeAsyncCore**: Validate connector registry endpoints, max concurrent connections, retry policy (attempts 1-10, backoff 100-60000ms), timeout (1000-300000ms). Throw InvalidOperationException for missing endpoints.
2. **Health check**: Test connector registry reachability. 60-second cache.
3. **ShutdownAsyncCore**: Cancel pending connector requests, dispose HTTP clients.
4. **Counters**: `IncrementCounter("connectorintegration.connect")`, `IncrementCounter("connectorintegration.disconnect")`.
5. **Error boundaries**: Handle connector unavailable (503), authentication failure (401), version mismatch.

DO NOT modify any transport or connector logic.
  </action>
  <verify>
`dotnet build DataWarehouse.slnx --no-restore 2>&1 | tail -5` — 0 errors 0 warnings.
  </verify>
  <done>AdaptiveTransport and UltimateIntelligence ConnectorIntegration have full production infrastructure. Build passes. Domains 09, 11, 12, 13 complete.</done>
</task>

</tasks>

<verification>
1. `dotnet build DataWarehouse.slnx --no-restore` passes with 0 errors, 0 warnings
2. All 4 cross-domain components have production infrastructure
3. Domains 09, 11, 12, 13 fully at 100%
</verification>

<success_criteria>
AirGap manifest, UltimateCompute HybridCompute, AdaptiveTransport, UltimateIntelligence ConnectorIntegration features pushed to 100%. Zero build errors.
</success_criteria>

<output>
After completion, create `.planning/phases/50.1-feature-gap-closure-push-all-80-99-features-to-100-production-readiness/50.1-09-SUMMARY.md`
</output>
