---
phase: 21.5-pre-execution-cleanup
plan: 03
type: execute
wave: 2
depends_on: ["21.5-01"]
files_modified:
  - DataWarehouse.slnx
autonomous: true

must_haves:
  truths:
    - "DataWarehouse.slnx contains all 69 .csproj files that exist on disk"
    - "AirGapBridge plugin is in the solution and builds successfully"
    - "DataMarketplace plugin is in the solution and builds successfully"
    - "Full solution builds with zero errors"
  artifacts:
    - path: "DataWarehouse.slnx"
      provides: "Complete solution file with all 69 projects"
      contains: "AirGapBridge"
  key_links:
    - from: "DataWarehouse.slnx"
      to: "Plugins/DataWarehouse.Plugins.AirGapBridge/DataWarehouse.Plugins.AirGapBridge.csproj"
      via: "Project element in slnx"
      pattern: "AirGapBridge"
    - from: "DataWarehouse.slnx"
      to: "Plugins/DataWarehouse.Plugins.DataMarketplace/DataWarehouse.Plugins.DataMarketplace.csproj"
      via: "Project element in slnx"
      pattern: "DataMarketplace"
---

<objective>
Add the 2 missing plugin projects (AirGapBridge and DataMarketplace) to DataWarehouse.slnx to achieve full solution completeness (69/69 projects).

Purpose: Every project that exists on disk must be in the solution file. Missing projects do not get built, tested, or analyzed -- they silently rot.
Output: DataWarehouse.slnx contains all 69 projects. Full solution builds.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21.5-pre-execution-cleanup/21.5-RESEARCH.md

# Solution file
@DataWarehouse.slnx

# Missing project files (verify they exist)
@Plugins/DataWarehouse.Plugins.AirGapBridge/DataWarehouse.Plugins.AirGapBridge.csproj
@Plugins/DataWarehouse.Plugins.DataMarketplace/DataWarehouse.Plugins.DataMarketplace.csproj
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add missing projects to DataWarehouse.slnx and verify full solution builds</name>
  <files>
    DataWarehouse.slnx
  </files>
  <action>
  **Step 1: Verify missing projects exist on disk**
  Confirm these files exist:
  - `Plugins/DataWarehouse.Plugins.AirGapBridge/DataWarehouse.Plugins.AirGapBridge.csproj`
  - `Plugins/DataWarehouse.Plugins.DataMarketplace/DataWarehouse.Plugins.DataMarketplace.csproj`

  **Step 2: Add to DataWarehouse.slnx**
  The slnx file uses XML format. Projects are listed under `<Folder Name="/Plugins/">`. Add the two missing projects in alphabetical order within the existing plugin list.

  Add these two lines inside the `/Plugins/` folder section, in alphabetical order among the existing `<Project>` elements:
  ```xml
  <Project Path="Plugins/DataWarehouse.Plugins.AirGapBridge/DataWarehouse.Plugins.AirGapBridge.csproj" />
  <Project Path="Plugins/DataWarehouse.Plugins.DataMarketplace/DataWarehouse.Plugins.DataMarketplace.csproj" />
  ```

  Place `AirGapBridge` after `DataWarehouse.Plugins.AedsCore` (alphabetical) and `DataMarketplace` after `DataWarehouse.Plugins.Compute.Wasm` or wherever it falls alphabetically among the existing entries.

  **Step 3: Verify count**
  After adding, the total number of `<Project Path=` entries in the slnx file should be 69 (was 67, plus 2 = 69).

  **Step 4: Build verification**
  Build the full solution to confirm both new projects compile:
  ```
  dotnet build DataWarehouse.slnx
  ```
  If either project has build errors (e.g., missing SDK reference, outdated target framework), fix them:
  - Ensure both projects target `net10.0`
  - Ensure both projects reference only `DataWarehouse.SDK.csproj` (plugin isolation rule)
  - If they reference any deprecated or removed types, update accordingly

  **Step 5: Verify project count**
  Count total projects in slnx to confirm 69:
  ```
  grep -c 'Project Path=' DataWarehouse.slnx
  ```
  Expected: 69
  </action>
  <verify>
  Full solution build: `dotnet build DataWarehouse.slnx`
  Expect: 0 errors.
  Count verification: `grep -c "Project Path=" DataWarehouse.slnx` returns 69.
  Specific project verification:
  - `grep "AirGapBridge" DataWarehouse.slnx` returns 1 match
  - `grep "DataMarketplace" DataWarehouse.slnx` returns 1 match
  Individual project builds:
  - `dotnet build Plugins/DataWarehouse.Plugins.AirGapBridge/DataWarehouse.Plugins.AirGapBridge.csproj` passes
  - `dotnet build Plugins/DataWarehouse.Plugins.DataMarketplace/DataWarehouse.Plugins.DataMarketplace.csproj` passes
  </verify>
  <done>
  DataWarehouse.slnx contains all 69 projects (was 67, added AirGapBridge and DataMarketplace). Full solution builds with zero errors. No project on disk is missing from the solution file.
  </done>
</task>

</tasks>

<verification>
- [ ] Full solution builds: `dotnet build DataWarehouse.slnx` passes with 0 errors
- [ ] AirGapBridge in solution: `grep "AirGapBridge" DataWarehouse.slnx` returns match
- [ ] DataMarketplace in solution: `grep "DataMarketplace" DataWarehouse.slnx` returns match
- [ ] Total project count: `grep -c "Project Path=" DataWarehouse.slnx` returns 69
- [ ] Both projects build individually without errors
</verification>

<success_criteria>
Plan 21.5-03 succeeds when:
1. DataWarehouse.slnx lists all 69 .csproj files that exist on disk
2. AirGapBridge and DataMarketplace are in the Plugins folder section
3. Full solution builds with zero errors
4. Both newly-added projects compile successfully
</success_criteria>

<output>
After completion, create `.planning/phases/21.5-pre-execution-cleanup/21.5-03-SUMMARY.md`
</output>
