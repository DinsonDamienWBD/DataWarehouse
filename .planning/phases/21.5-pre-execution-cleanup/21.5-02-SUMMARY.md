---
phase: 21.5-pre-execution-cleanup
plan: 02
---
# Phase 21.5 Plan 02 Summary

Migrate all 59 Newtonsoft.Json calls (56 in Shared, 3 in UniversalDashboards) to System.Text.Json, and remove Newtonsoft.Json PackageReference from both projects.

## What Changed
- Migrated InstanceManager.cs (4 calls): capabilities round-trip serialization and profile save/load
- Migrated MessageBridge.cs (2 calls): TCP message serialize/deserialize
- Migrated CapabilityManager.cs (2 calls): capability refresh round-trip
- Migrated ComplianceReportService.cs (30 calls): 15 serialize + 15 deserialize pairs across GDPR, HIPAA, SOC2
- Migrated DeveloperToolsService.cs (18 calls): API explorer, schema designer, query builder round-trips
- Migrated DashboardStrategyBase.cs (2 calls): SerializeToJson and DeserializeFromJson helper methods
- Migrated ExportStrategies.cs (1 call): indented JSON export for platform format
- Removed Newtonsoft.Json 13.0.4 PackageReference from DataWarehouse.Shared.csproj
- Removed Newtonsoft.Json 13.0.4 PackageReference from UniversalDashboards.csproj
- All deserialization uses PropertyNameCaseInsensitive=true for round-trip compatibility
- WriteIndented=true used where Formatting.Indented was previously used
- NullValueHandling.Ignore translated to JsonIgnoreCondition.WhenWritingNull (DashboardStrategyBase)

## Deviations from Plan
None - plan executed exactly as written.

## Files Modified
- Modified: DataWarehouse.Shared/InstanceManager.cs
- Modified: DataWarehouse.Shared/MessageBridge.cs
- Modified: DataWarehouse.Shared/CapabilityManager.cs
- Modified: DataWarehouse.Shared/Services/ComplianceReportService.cs
- Modified: DataWarehouse.Shared/Services/DeveloperToolsService.cs
- Modified: DataWarehouse.Shared/DataWarehouse.Shared.csproj
- Modified: Plugins/DataWarehouse.Plugins.UniversalDashboards/DashboardStrategyBase.cs
- Modified: Plugins/DataWarehouse.Plugins.UniversalDashboards/Strategies/Export/ExportStrategies.cs
- Modified: Plugins/DataWarehouse.Plugins.UniversalDashboards/DataWarehouse.Plugins.UniversalDashboards.csproj

## Build Status
PASS - Shared builds with 0 errors, UniversalDashboards builds with 0 errors

## Metrics
- Files created: 0
- Files modified: 9
- Files deleted: 0
