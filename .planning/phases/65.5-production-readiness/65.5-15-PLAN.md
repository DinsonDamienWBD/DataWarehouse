---
phase: 65.5-production-readiness
plan: 15
type: execute
wave: 5
depends_on: ["65.5-11", "65.5-12", "65.5-13", "65.5-14"]
autonomous: true

must_haves:
  truths:
    - "All 14 stateful plugins implement SaveStateAsync/LoadStateAsync"
    - "State is persisted via OnBeforeStatePersistAsync and restored in OnStartCoreAsync"
    - "BoundedDictionary used where applicable for auto-persistence"
    - "All plugins compile with zero errors"
---

<objective>
Implement SaveStateAsync/LoadStateAsync across 14 stateful plugins (priority order: compliance-critical first).

1. UltimateDataPrivacy — consent records, privacy policies (GDPR-critical)
2. UltimateAccessControl — audit log, policy state
3. UltimateDataGovernance — governance policies, ownership records, classifications
4. UltimateDataCatalog — catalog assets, lineage relationships, glossary
5. UltimateDataLake — catalog, lineage, access policies
6. UltimateDataLineage — lineage graph nodes and edges
7. UltimateDataMesh — domains, products, consumers, shares
8. UltimateDataManagement — policies (now includes fabric state)
9. UltimateDataQuality — quality policies
10. UltimateReplication — node identity, counters
11. UltimateKeyManagement — rotation schedules, registered store IDs
12. UltimateEncryption — FIPS mode, default strategy (if not done in 65.5-09)
13. UltimateStorage — default strategy, failover config
14. UltimateConsensus — consensus state, commit indices

Pattern: Override OnBeforeStatePersistAsync to serialize state -> SaveStateAsync. Override OnStartCoreAsync to call LoadStateAsync -> deserialize state.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/65.5-production-readiness-plan.md
@.planning/PLUGIN-CATALOG.md
</context>

<tasks>
<task type="auto">
  <name>Task 1: Implement state persistence for plugins 1-7 (compliance-critical)</name>
  <action>
    For each of the first 7 plugins:
    1. Read the plugin main file
    2. Identify mutable state that must survive restarts
    3. Override OnBeforeStatePersistAsync to serialize state dictionary
    4. In OnStartCoreAsync, call LoadStateAsync and deserialize
    5. Use BoundedDictionary where applicable
    Build verify.
  </action>
  <verify>7 compliance-critical plugins persist state.</verify>
  <done>GDPR, access control, governance, catalog, lake, lineage, mesh state persisted.</done>
</task>

<task type="auto">
  <name>Task 2: Implement state persistence for plugins 8-14</name>
  <action>
    For remaining 7 plugins: same pattern as Task 1.
    Build verify: `dotnet build DataWarehouse.slnx` — zero errors.
  </action>
  <verify>All 14 plugins persist state.</verify>
  <done>All stateful plugins have SaveStateAsync/LoadStateAsync.</done>
</task>
</tasks>

<output>
After completion, create `.planning/phases/65.5-production-readiness/65.5-15-SUMMARY.md`
</output>
