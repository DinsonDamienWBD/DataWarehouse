---
phase: 60-semantic-sync
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - Plugins/DataWarehouse.Plugins.SemanticSync/SemanticSyncPlugin.cs
  - Plugins/DataWarehouse.Plugins.SemanticSync/DataWarehouse.Plugins.SemanticSync.csproj
autonomous: true

must_haves:
  truths:
    - "SemanticSync plugin exists as a new plugin following OrchestrationPluginBase pattern"
    - "Plugin registers with kernel via standard plugin lifecycle"
    - "Plugin project references only DataWarehouse.SDK"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.SemanticSync/SemanticSyncPlugin.cs"
      provides: "Plugin shell with registration, lifecycle, strategy dictionary"
      contains: "class SemanticSyncPlugin : OrchestrationPluginBase"
    - path: "Plugins/DataWarehouse.Plugins.SemanticSync/DataWarehouse.Plugins.SemanticSync.csproj"
      provides: "Project file referencing SDK only"
      contains: "ProjectReference"
  key_links:
    - from: "SemanticSyncPlugin.cs"
      to: "DataWarehouse.SDK"
      via: "ProjectReference in csproj"
      pattern: "Include.*DataWarehouse.SDK"
---

<objective>
Create the SemanticSync plugin project and plugin shell class. This is the host plugin that will own all semantic sync strategies added in subsequent plans.

Purpose: Establishes the plugin container early so Plans 03-07 can add strategies into it. Follows the same pattern as UltimateEdgeComputing — OrchestrationPluginBase, strategy dictionary, message bus subscriptions.

Output: New plugin project DataWarehouse.Plugins.SemanticSync with plugin class
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/PLUGIN-CATALOG.md
@Plugins/DataWarehouse.Plugins.UltimateEdgeComputing/UltimateEdgeComputingPlugin.cs
@DataWarehouse.SDK/Contracts/Hierarchy/DataPipeline/ReplicationPluginBase.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SemanticSync Plugin Project</name>
  <files>
    Plugins/DataWarehouse.Plugins.SemanticSync/DataWarehouse.Plugins.SemanticSync.csproj
    Plugins/DataWarehouse.Plugins.SemanticSync/SemanticSyncPlugin.cs
  </files>
  <action>
**csproj file:** Create following the pattern of other plugin .csproj files (net10.0, ProjectReference to ../../DataWarehouse.SDK/DataWarehouse.SDK.csproj ONLY, no other project references — plugin isolation rule). Include `<RootNamespace>DataWarehouse.Plugins.SemanticSync</RootNamespace>`.

**SemanticSyncPlugin.cs:** Create plugin class:
- Namespace: `DataWarehouse.Plugins.SemanticSync`
- Inherit from `OrchestrationPluginBase` (same as UltimateEdgeComputingPlugin)
- Id: `"semantic-sync-protocol"`
- Name: `"Semantic Sync Protocol"`
- Version: `"5.0.0"` (this is v5.0 feature)
- OrchestrationMode: `"SemanticSync"`
- Category: `PluginCategory.FeatureProvider`

**Internal structure:**
- `ConcurrentDictionary<string, StrategyBase> _strategies` for strategy registration
- Override `InitializeAsync` to:
  1. Log initialization
  2. Register strategies (empty for now, Plans 03-07 add them)
  3. Subscribe to message bus topics: `semantic-sync.classify`, `semantic-sync.route`, `semantic-sync.conflict`, `semantic-sync.fidelity`
- Override `ShutdownAsync` to dispose strategies and unsubscribe
- Public methods for strategy registration: `RegisterStrategy(string name, StrategyBase strategy)` and `GetStrategy<T>(string name) where T : StrategyBase`
- Follow the exact same lifecycle pattern as UltimateEdgeComputingPlugin

**Add to solution:** Add the new project to DataWarehouse.slnx using `dotnet sln add`.
  </action>
  <verify>dotnet build Plugins/DataWarehouse.Plugins.SemanticSync/DataWarehouse.Plugins.SemanticSync.csproj 2>&1 | tail -5</verify>
  <done>Plugin project builds, class inherits OrchestrationPluginBase, project is in slnx, only SDK reference exists</done>
</task>

<task type="auto">
  <name>Task 2: Create Strategy Directory Structure and Placeholder Strategies Folder</name>
  <files>
    Plugins/DataWarehouse.Plugins.SemanticSync/Strategies/.gitkeep
  </files>
  <action>
Create the Strategies directory under the plugin with subdirectories that Plans 03-07 will populate:
- `Strategies/Classification/` — Plan 03 adds semantic classification strategies
- `Strategies/Routing/` — Plan 04 adds summary-vs-raw routing strategies
- `Strategies/ConflictResolution/` — Plan 05 adds semantic conflict resolution
- `Strategies/Fidelity/` — Plan 06 adds bandwidth-aware fidelity control
- `Strategies/EdgeInference/` — Plan 07 adds edge inference integration

Create a `.gitkeep` in each empty directory so git tracks them. Do NOT create any strategy files — those come in later plans.

Verify the full solution still builds with the new project included.
  </action>
  <verify>dotnet build DataWarehouse.slnx --no-restore 2>&1 | grep -E "(error|Error|Build succeeded)" | head -5</verify>
  <done>Directory structure exists, solution builds including the new plugin project</done>
</task>

</tasks>

<verification>
- `dotnet build Plugins/DataWarehouse.Plugins.SemanticSync/` compiles with zero errors
- Plugin is listed in DataWarehouse.slnx
- grep confirms only DataWarehouse.SDK project reference in csproj
- SemanticSyncPlugin inherits OrchestrationPluginBase
</verification>

<success_criteria>
- New plugin project compiles and is part of the solution
- Plugin class follows established lifecycle patterns
- Strategy directories ready for Plans 03-07
</success_criteria>

<output>
After completion, create `.planning/phases/60-semantic-sync/60-02-SUMMARY.md`
</output>
