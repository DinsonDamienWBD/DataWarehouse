---
phase: 28-dead-code-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - DataWarehouse.SDK/Contracts/InfrastructureContracts.cs
  - DataWarehouse.SDK/Contracts/InfrastructurePluginBases.cs
  - DataWarehouse.SDK/Contracts/ProviderInterfaces.cs
  - DataWarehouse.SDK/Contracts/OrchestrationInterfaces.cs
  - DataWarehouse.SDK/Contracts/Hierarchy/NewFeaturePluginBase.cs
  - DataWarehouse.SDK/Contracts/PublicTypes.cs
  - DataWarehouse.SDK/Contracts/HardwareAccelerationPluginBases.cs
  - DataWarehouse.SDK/Contracts/LowLatencyPluginBases.cs
  - DataWarehouse.SDK/Contracts/MilitarySecurityPluginBases.cs
  - DataWarehouse.SDK/Hardware/IHardwareAcceleration.cs
  - DataWarehouse.SDK/Sustainability/ICarbonAwareStorage.cs
  - DataWarehouse.SDK/Virtualization/IHypervisorSupport.cs
  - DataWarehouse.SDK/Scale/IExabyteScale.cs
  - DataWarehouse.SDK/Security/IMilitarySecurity.cs
  - DataWarehouse.SDK/Performance/ILowLatencyStorage.cs
autonomous: true

must_haves:
  truths:
    - "All live types from mixed files (InfrastructurePluginBases.cs, ProviderInterfaces.cs, OrchestrationInterfaces.cs) are safely extracted into new or existing files"
    - "All 9 future-ready interface files have FUTURE: documentation comments per AD-06"
    - "Build compiles with zero errors after extraction and documentation"
  artifacts:
    - path: "DataWarehouse.SDK/Contracts/InfrastructureContracts.cs"
      provides: "Extracted live types from InfrastructurePluginBases.cs (IHealthCheck, IRateLimiter, IResiliencePolicy, ITransactionManager, RaidLevel, RaidArrayStatus, ComplianceViolation, ComplianceReport, ComplianceContext, ViolationSeverity, AuthenticationResult, TokenValidationResult, AuthorizationResult, CircuitBreakerOpenException)"
      min_lines: 50
    - path: "DataWarehouse.SDK/Contracts/HardwareAccelerationPluginBases.cs"
      provides: "FUTURE: comment header for TPM2/HSM/QAT/GPU hardware acceleration"
      contains: "FUTURE:"
    - path: "DataWarehouse.SDK/Contracts/LowLatencyPluginBases.cs"
      provides: "FUTURE: comment header for RDMA/io_uring/NUMA"
      contains: "FUTURE:"
    - path: "DataWarehouse.SDK/Contracts/MilitarySecurityPluginBases.cs"
      provides: "FUTURE: comment header for military security"
      contains: "FUTURE:"
  key_links:
    - from: "DataWarehouse.SDK/Contracts/InfrastructureContracts.cs"
      to: "All files that currently reference IHealthCheck, RaidLevel, ComplianceViolation, etc."
      via: "Same namespace -- using directives unchanged"
      pattern: "namespace DataWarehouse\\.SDK\\.Contracts"
    - from: "DataWarehouse.SDK/Contracts/ProviderInterfaces.cs"
      to: "6 files referencing IFeaturePlugin, 29 files referencing IStorageProvider"
      via: "Types moved to existing contracts files or kept in a minimal ProviderInterfaces.cs"
      pattern: "IFeaturePlugin|IStorageProvider"
---

<objective>
Extract live types from mixed files and document future-ready interfaces.

Purpose: Before any dead code deletion can happen, live types embedded in mostly-dead files must be safely relocated. This prevents build breaks when Plans 02/03 delete those files. Additionally, AD-06 requires all future-ready interfaces to have explicit "FUTURE:" documentation.

Output: New InfrastructureContracts.cs with extracted live types, cleaned ProviderInterfaces.cs and OrchestrationInterfaces.cs, and FUTURE: comments on all 9 preserved interface files.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/ARCHITECTURE_DECISIONS.md
@.planning/phases/28-dead-code-cleanup/28-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract live types from mixed files into safe locations</name>
  <files>
    DataWarehouse.SDK/Contracts/InfrastructureContracts.cs
    DataWarehouse.SDK/Contracts/InfrastructurePluginBases.cs
    DataWarehouse.SDK/Contracts/ProviderInterfaces.cs
    DataWarehouse.SDK/Contracts/OrchestrationInterfaces.cs
    DataWarehouse.SDK/Contracts/PublicTypes.cs
    DataWarehouse.SDK/Contracts/Hierarchy/NewFeaturePluginBase.cs
  </files>
  <action>
    **InfrastructurePluginBases.cs (2,652 LOC, mixed):**
    1. Read InfrastructurePluginBases.cs fully. Identify ALL live types by grepping each type name across the codebase (excluding obj/).
    2. Create new file `Contracts/InfrastructureContracts.cs` in the SAME namespace (`DataWarehouse.SDK.Contracts`).
    3. Move these LIVE types into InfrastructureContracts.cs:
       - `IHealthCheck` (used by KernelInfrastructure, ServiceManager)
       - `IRateLimiter`, `IResiliencePolicy` (used by infrastructure)
       - `ITransactionManager` (1+ external refs)
       - `RaidLevel`, `RaidArrayStatus` (used by RAID plugin)
       - `ComplianceViolation`, `ComplianceReport`, `ComplianceContext`, `ViolationSeverity` (used by Compliance plugin)
       - `AuthenticationResult`, `TokenValidationResult`, `AuthorizationResult` (used by security plugins)
       - `CircuitBreakerOpenException` (used externally)
    4. Keep the same namespace so no `using` changes are needed anywhere.
    5. Remove only the LIVE types from InfrastructurePluginBases.cs (leave dead types in place -- Plan 02 deletes them).
    6. Verify with `dotnet build DataWarehouse.slnx` that extraction compiles.

    **ProviderInterfaces.cs (64 LOC, mixed):**
    1. Read ProviderInterfaces.cs. It contains IFeaturePlugin (6 refs) and IStorageProvider (29 refs).
    2. Grep for where IFeaturePlugin and IStorageProvider are DEFINED elsewhere (they may already exist in IPlugin.cs or similar). If they exist elsewhere, ProviderInterfaces.cs may be re-declarations.
    3. If the types are ONLY defined in ProviderInterfaces.cs: move them to an appropriate existing file (e.g., IPlugin.cs area) OR keep ProviderInterfaces.cs with only live types (rename to a more accurate name).
    4. If duplicate definitions exist: verify which is canonical, update refs to canonical, mark the copy as dead.
    5. Build and verify.

    **OrchestrationInterfaces.cs (1,601 LOC, mostly dead):**
    1. Read OrchestrationInterfaces.cs fully. Identify the LIVE types:
       - `IWriteDestination` (4 refs)
       - `IContentProcessor` (2 refs)
       - `WriteDestinationPluginBase` (3 refs)
    2. Move these 3 live types to an appropriate location (a new small file like `Contracts/OrchestrationContracts.cs` or an existing pipeline contracts file). Keep the same namespace.
    3. Remove the live types from OrchestrationInterfaces.cs (leave dead types -- Plan 02 deletes the file).
    4. Build and verify.

    **PublicTypes.cs (70 LOC, possibly dead):**
    1. Grep for ISemanticMemory, IMetricsProvider, RemoteResourceUnavailableException.
    2. If their refs are ONLY from other dead files being removed in this phase: mark entire file as dead (Plan 02 deletes).
    3. If any refs are from live code: extract live types, mark rest dead.

    **NewFeaturePluginBase.cs (52 LOC):**
    1. Grep for `FeaturePluginBase` in `Contracts/Hierarchy/NewFeaturePluginBase.cs` specifically.
    2. Check if this is a redirect/alias to the real FeaturePluginBase in the Hierarchy namespace.
    3. If it is just a redirect and the real FeaturePluginBase exists in Hierarchy/: check if any code references this specific file's version. If 0 external refs: mark as dead for Plan 02.
    4. If code DOES reference it: leave it alone (it is a compatibility bridge).
  </action>
  <verify>
    Run `dotnet build DataWarehouse.slnx` -- zero new errors. Grep for each extracted type name to confirm references still resolve (same namespace means they should auto-resolve).
  </verify>
  <done>
    All live types from InfrastructurePluginBases.cs, ProviderInterfaces.cs, and OrchestrationInterfaces.cs are safely in new/existing files. Build compiles. Dead types remain in original files ready for deletion in Plans 02/03.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add FUTURE: documentation to all preserved future-ready interfaces</name>
  <files>
    DataWarehouse.SDK/Contracts/HardwareAccelerationPluginBases.cs
    DataWarehouse.SDK/Contracts/LowLatencyPluginBases.cs
    DataWarehouse.SDK/Contracts/MilitarySecurityPluginBases.cs
    DataWarehouse.SDK/Hardware/IHardwareAcceleration.cs
    DataWarehouse.SDK/Sustainability/ICarbonAwareStorage.cs
    DataWarehouse.SDK/Virtualization/IHypervisorSupport.cs
    DataWarehouse.SDK/Scale/IExabyteScale.cs
    DataWarehouse.SDK/Security/IMilitarySecurity.cs
    DataWarehouse.SDK/Performance/ILowLatencyStorage.cs
  </files>
  <action>
    For each of the 9 future-ready files, add a `// FUTURE:` comment block at the TOP of the file (after using directives, before namespace), following this pattern:

    ```csharp
    // FUTURE: {technology domain} -- interfaces preserved for {specific hardware/technology} per AD-06.
    // These types have zero current implementations but define contracts for future
    // {technology}-capable storage plugins. Do NOT delete during dead code cleanup.
    ```

    Specific comments per file:
    1. `HardwareAccelerationPluginBases.cs` (1,126 LOC): "FUTURE: Hardware acceleration -- interfaces preserved for TPM2, HSM, QAT, and GPU acceleration per AD-06."
    2. `LowLatencyPluginBases.cs` (554 LOC): "FUTURE: Low-latency I/O -- interfaces preserved for RDMA, io_uring, and NUMA-aware storage per AD-06."
    3. `MilitarySecurityPluginBases.cs` (788 LOC): "FUTURE: Military-grade security -- interfaces preserved for mandatory access control, multi-level security, and two-person integrity per AD-06."
    4. `IHardwareAcceleration.cs` (435 LOC): "FUTURE: Hardware accelerator contracts -- interfaces preserved for pluggable hardware acceleration (TPM2, HSM, QAT, GPU) per AD-06."
    5. `ICarbonAwareStorage.cs` (451 LOC): "FUTURE: Carbon-aware scheduling -- interfaces preserved for carbon-aware storage scheduling per AD-06."
    6. `IHypervisorSupport.cs` (306 LOC): "FUTURE: Hypervisor integration -- interfaces preserved for hypervisor detection and balloon driver support per AD-06."
    7. `IExabyteScale.cs` (444 LOC): "FUTURE: Exabyte-scale sharding -- interfaces preserved for exabyte-scale storage partitioning per AD-06."
    8. `IMilitarySecurity.cs` (517 LOC): "FUTURE: Military security contracts -- interfaces preserved for two-person integrity, mandatory access control, multi-level security per AD-06."
    9. `ILowLatencyStorage.cs` (301 LOC): "FUTURE: Low-latency storage contracts -- interfaces preserved for RDMA and kernel-bypass I/O per AD-06."

    Also check: if CarbonAwarePluginBases.cs or HypervisorPluginBases.cs contain interfaces that cross-reference these future-ready files (research notes "interfaces in ICarbonAwareStorage.cs" and "interfaces in IHypervisorSupport.cs"), add a comment in those base files pointing to the preserved interface file.

    Do NOT modify any code logic -- only add comments.
  </action>
  <verify>
    Run `dotnet build DataWarehouse.slnx` -- still zero new errors (comments only). Grep for "FUTURE:" across SDK to confirm all 9 files have the marker: `grep -rl "FUTURE:" DataWarehouse.SDK/ --include="*.cs" | wc -l` should return >= 9.
  </verify>
  <done>
    All 9 future-ready interface files have FUTURE: documentation comments per AD-06 and CLEAN-03. No code changes, only documentation. Build still compiles.
  </done>
</task>

</tasks>

<verification>
1. `dotnet build DataWarehouse.slnx` compiles with zero new errors
2. All extracted types (IHealthCheck, RaidLevel, IWriteDestination, IFeaturePlugin, IStorageProvider, etc.) still resolve in all referencing files
3. All 9 future-ready files have "FUTURE:" comment headers
4. No functionality changed -- only type relocation and comments added
</verification>

<success_criteria>
- InfrastructureContracts.cs exists with all live types from InfrastructurePluginBases.cs
- ProviderInterfaces.cs and OrchestrationInterfaces.cs have live types safely relocated
- 9 future-ready files documented with FUTURE: markers per AD-06 and CLEAN-03
- Build compiles with zero new errors
- Files ready for safe deletion in Plans 02/03
</success_criteria>

<output>
After completion, create `.planning/phases/28-dead-code-cleanup/28-01-SUMMARY.md`
</output>
