---
phase: 18-plugin-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["18-01"]
files_modified:
  - DataWarehouse.slnx
  - DataWarehouse.Tests/DataWarehouse.Tests.csproj
autonomous: true

must_haves:
  truths:
    - "All 66 deprecated plugin Project entries are removed from DataWarehouse.slnx"
    - "All 88 deprecated plugin directories are deleted from Plugins/"
    - "All 17 orphaned test files are deleted from DataWarehouse.Tests/"
    - "All 17 Compile Remove entries are removed from DataWarehouse.Tests.csproj"
    - "The 13 KEEP standalone plugins remain untouched on disk and in slnx"
    - "All 44 Ultimate/Universal plugins remain untouched on disk and in slnx"
    - "Solution builds with zero errors after all removals"
  artifacts:
    - path: "DataWarehouse.slnx"
      provides: "Solution file with only KEEP and Ultimate/Universal plugin entries"
      contains: "UltimateCompression"
    - path: "DataWarehouse.Tests/DataWarehouse.Tests.csproj"
      provides: "Test project with zero Compile Remove entries for deleted test files"
  key_links:
    - from: "DataWarehouse.slnx"
      to: "Plugins/"
      via: "Every remaining Project entry has a matching directory on disk"
      pattern: "Project Path.*Plugins"
    - from: "DataWarehouse.Tests/DataWarehouse.Tests.csproj"
      to: "DataWarehouse.Tests/"
      via: "No Compile Remove entries referencing non-existent files"
---

<objective>
Execute the bulk removal: strip 66 deprecated plugin entries from DataWarehouse.slnx, delete all 88 deprecated plugin directories, clean up 17 orphaned test files and their Compile Remove entries, and verify the solution builds cleanly.

Purpose: This is the primary cleanup execution. It eliminates ~3,673 files of dead code, reducing the solution from 145 plugin directories to 57 and from ~121 slnx plugin entries to ~55.

Output: Clean DataWarehouse.slnx, deleted plugin directories, clean test project, passing build.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/18-plugin-cleanup/18-RESEARCH.md
@.planning/phases/18-plugin-cleanup/18-01-SUMMARY.md
@DataWarehouse.slnx
@DataWarehouse.Tests/DataWarehouse.Tests.csproj
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove deprecated entries from slnx and delete plugin directories</name>
  <files>DataWarehouse.slnx</files>
  <action>
**Step 1: Remove 66 deprecated Project entries from DataWarehouse.slnx**

Read DataWarehouse.slnx. Remove every `<Project Path="Plugins/DataWarehouse.Plugins.XXXX/..."` line where XXXX matches one of the 66 deprecated plugins that are BOTH on disk AND in slnx. The definitive list (from 18-RESEARCH.md verified by Plan 18-01):

AccessLog, AccessPrediction, AdoNetProvider, AIInterface, Alerting, AlertingOps, ApacheSuperset, AuditLogging, BatteryAware, BlueGreenDeployment, CanaryDeployment, CarbonAwareness, Chronograf, ContentProcessing, Datadog, DistributedTracing, DistributedTransactions, Docker, Dynatrace, FilesystemCore, Geckoboard, GeoDistributedConsensus, GrafanaLoki, GraphQlApi, GrpcInterface, HardwareAcceleration, HierarchicalQuorum, HotReload, Hypervisor, Jaeger, JdbcBridge, K8sOperator, Kibana, LoadBalancer, LogicMonitor, Logzio, LowLatency, Metabase, Metadata, MySqlProtocol, Netdata, NewRelic, NoSqlProtocol, OdbcDriver, OpenTelemetry, OracleTnsProtocol, Perses, PostgresWireProtocol, PowerBI, Prometheus, Redash, Resilience, RestInterface, RetryPolicy, SchemaRegistry, Search, SigNoz, SmartScheduling, Splunk, SqlInterface, Tableau, TdsProtocol, VictoriaMetrics, Zabbix, ZeroConfig, ZeroDowntimeUpgrade.

DO NOT remove entries for these KEEP plugins:
- Standalone (11 in slnx): AdaptiveTransport, AedsCore, Compute.Wasm, FuseDriver, KubernetesCsi, Raft, SelfEmulatingObjects, TamperProof, Transcoding.Media, Virtualization.SqlOverObject, WinFspDriver
- Ultimate/Universal (all ~44): Any plugin starting with "Ultimate" or "Universal"

Write the updated DataWarehouse.slnx. The `<File Path="Plugin Readme.txt" />` entry stays (it will be reviewed in Plan 18-03).

**Step 2: Delete all 88 deprecated plugin directories**

Use `git rm -r` (not raw file deletion) so git tracks the removals. Delete directories for all 66 plugins above PLUS the 22 disk-only deprecated plugins:

AdaptiveEc, AdvancedRaid, AutoRaid, CrdtReplication, CrossRegion, EnhancedRaid, ErasureCoding, ExtendedRaid, FanOutOrchestration, FederatedQuery, Federation, GeoReplication, IsalEc, MultiMaster, NestedRaid, Raid, RealTimeSync, SelfHealingRaid, SharedRaidUtilities, StandardRaid, VendorSpecificRaid, ZfsRaid.

Each directory path is: `Plugins/DataWarehouse.Plugins.{Name}/`

Run deletion in batches if needed. Verify each directory no longer exists after deletion.

DO NOT delete these directories:
- The 13 KEEP standalone plugins (AdaptiveTransport, AirGapBridge, DataMarketplace, SelfEmulatingObjects, Compute.Wasm, Transcoding.Media, Virtualization.SqlOverObject, FuseDriver, WinFspDriver, KubernetesCsi, Raft, TamperProof, AedsCore)
- Any directory starting with "Ultimate" or "Universal"
  </action>
  <verify>
Run: `dotnet clean DataWarehouse.slnx` then `dotnet build DataWarehouse.slnx`
Build must complete with zero errors (warnings acceptable at this stage).
Count remaining plugin directories: `ls Plugins/ | grep DataWarehouse.Plugins | wc -l` should equal 57.
Count remaining Project entries in slnx: should equal 55 (57 dirs minus AirGapBridge and DataMarketplace which are not in slnx).
  </verify>
  <done>DataWarehouse.slnx contains zero deprecated plugin entries. All 88 deprecated plugin directories are deleted. Build passes with zero errors. 57 plugin directories remain (13 standalone + 44 ultimate/universal).</done>
</task>

<task type="auto">
  <name>Task 2: Clean up orphaned test files and Compile Remove entries</name>
  <files>DataWarehouse.Tests/DataWarehouse.Tests.csproj</files>
  <action>
**Step 1: Delete 17 orphaned test files**

Use `git rm` to delete each of these files from DataWarehouse.Tests/:

1. PluginTests.cs
2. Replication/GeoReplicationPluginTests.cs
3. Database/RelationalDatabasePluginTests.cs
4. Database/EmbeddedDatabasePluginTests.cs
5. Infrastructure/CircuitBreakerPolicyTests.cs
6. Infrastructure/MetricsCollectorTests.cs
7. Infrastructure/TokenBucketRateLimiterTests.cs
8. Infrastructure/SdkInfrastructureTests.cs
9. Infrastructure/CodeCleanupVerificationTests.cs
10. Telemetry/DistributedTracingTests.cs
11. Hyperscale/ErasureCodingTests.cs
12. Storage/DurableStateTests.cs
13. Kernel/DataWarehouseKernelTests.cs
14. Integration/KernelIntegrationTests.cs
15. Messaging/AdvancedMessageBusTests.cs
16. Pipeline/PipelineOrchestratorTests.cs
17. Security/MpcStrategyTests.cs

If any file does not exist (already deleted in a prior phase), skip it silently -- this is expected.

**Step 2: Remove Compile Remove entries from DataWarehouse.Tests.csproj**

Read DataWarehouse.Tests.csproj. Remove the entire `<ItemGroup>` block containing the 17 `<Compile Remove="...">` entries (lines 39-57 area). Or if the ItemGroup contains other non-Compile-Remove items, remove only the 17 Compile Remove lines. Write the updated file.

Specifically remove these lines:
```xml
<Compile Remove="Infrastructure\CircuitBreakerPolicyTests.cs" />
<Compile Remove="Infrastructure\MetricsCollectorTests.cs" />
<Compile Remove="Infrastructure\TokenBucketRateLimiterTests.cs" />
<Compile Remove="Infrastructure\SdkInfrastructureTests.cs" />
<Compile Remove="Telemetry\DistributedTracingTests.cs" />
<Compile Remove="Hyperscale\ErasureCodingTests.cs" />
<Compile Remove="Storage\DurableStateTests.cs" />
<Compile Remove="Kernel\DataWarehouseKernelTests.cs" />
<Compile Remove="Database\RelationalDatabasePluginTests.cs" />
<Compile Remove="Database\EmbeddedDatabasePluginTests.cs" />
<Compile Remove="Infrastructure\CodeCleanupVerificationTests.cs" />
<Compile Remove="Integration\KernelIntegrationTests.cs" />
<Compile Remove="Messaging\AdvancedMessageBusTests.cs" />
<Compile Remove="PluginTests.cs" />
<Compile Remove="Pipeline\PipelineOrchestratorTests.cs" />
<Compile Remove="Replication\GeoReplicationPluginTests.cs" />
<Compile Remove="Security\MpcStrategyTests.cs" />
```

**Step 3: Verify build still passes**

Run `dotnet build DataWarehouse.slnx` again to confirm removing test files and Compile Remove entries did not introduce any new errors.
  </action>
  <verify>
Run: `dotnet build DataWarehouse.slnx` -- must pass with zero errors.
Grep DataWarehouse.Tests.csproj for "Compile Remove" -- should return zero matches.
Check that none of the 17 test files exist on disk anymore.
  </verify>
  <done>All 17 orphaned test files deleted. All 17 Compile Remove entries removed from DataWarehouse.Tests.csproj. Build passes with zero errors. Test project is clean.</done>
</task>

</tasks>

<verification>
- `dotnet build DataWarehouse.slnx` passes with zero errors
- `ls Plugins/ | grep DataWarehouse.Plugins | wc -l` returns 57
- `grep "Compile Remove" DataWarehouse.Tests/DataWarehouse.Tests.csproj` returns nothing
- No deprecated plugin directory exists under Plugins/
- All KEEP and Ultimate/Universal plugins still present
</verification>

<success_criteria>
88 deprecated plugin directories deleted. 66 slnx entries removed. 17 test files deleted. 17 Compile Remove entries cleaned. Solution builds with zero errors. 57 plugin directories remain.
</success_criteria>

<output>
After completion, create `.planning/phases/18-plugin-cleanup/18-02-SUMMARY.md`
</output>
