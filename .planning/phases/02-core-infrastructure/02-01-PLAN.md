---
phase: 02-core-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Plugins/DataWarehouse.Plugins.UltimateIntelligence/UltimateIntelligencePlugin.cs
  - Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/*.cs
  - Plugins/DataWarehouse.Plugins.UltimateIntelligence/KnowledgeSystem.cs
  - Metadata/TODO.md
autonomous: true

must_haves:
  truths:
    - "UniversalIntelligence plugin registers with microkernel and responds to message bus queries"
    - "Each AI provider strategy (OpenAI, Claude, Azure, AWS, HuggingFace, Ollama) can be instantiated and makes real HTTP API calls"
    - "KnowledgeObject envelopes can be created, serialized, and routed through the message bus"
    - "No NotImplementedException, placeholder, or simulation code exists in core plugin or provider files"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateIntelligence/UltimateIntelligencePlugin.cs"
      provides: "Plugin orchestrator with strategy discovery and message bus integration"
    - path: "Plugins/DataWarehouse.Plugins.UltimateIntelligence/KnowledgeSystem.cs"
      provides: "KnowledgeObject envelope management"
    - path: "Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/OpenAiProviderStrategy.cs"
      provides: "OpenAI AI provider strategy"
  key_links:
    - from: "UltimateIntelligencePlugin.cs"
      to: "SDK IntelligencePluginBase"
      via: "class inheritance"
      pattern: "IntelligencePluginBase"
    - from: "UltimateIntelligencePlugin.cs"
      to: "MessageBus"
      via: "message bus subscription"
      pattern: "MessageBus.*Subscribe"
    - from: "KnowledgeSystem.cs"
      to: "UltimateIntelligencePlugin.cs"
      via: "plugin orchestrator wiring"
      pattern: "KnowledgeSystem|KnowledgeObject"
---

<objective>
Verify and complete the UniversalIntelligence plugin core (T90) -- plugin orchestrator, all AI provider strategies, and KnowledgeObject envelope system.

Purpose: The Intelligence plugin is the AI backbone. This plan focuses on the plugin core, AI providers, and knowledge envelope -- the components other plugins depend on for AI features.
Output: Verified plugin orchestrator, 6+ AI provider strategies, and KnowledgeSystem. TODO.md updated for T90 core items.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-infrastructure/02-RESEARCH.md
@Metadata/Incomplete Tasks.txt
@Metadata/TODO.md
@Metadata/CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify plugin orchestrator, AI providers, and KnowledgeSystem</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/UltimateIntelligencePlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/KnowledgeSystem.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/OpenAiProviderStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/ClaudeProviderStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/OllamaProviderStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/AzureOpenAiProviderStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/AwsBedrockProviderStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/HuggingFaceProviderStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/AdditionalProviders.cs
  </files>
  <action>
    Read `Metadata/Incomplete Tasks.txt` and identify all T90-related incomplete items.
    Then verify the plugin core and AI providers:

    1. **Plugin orchestrator** (UltimateIntelligencePlugin.cs): Verify it extends IntelligencePluginBase (or correct SDK base), has strategy auto-discovery, message bus subscriptions, capability registration, and lifecycle management. No NotImplementedException.

    2. **AI Provider strategies** (Strategies/Providers/): Verify each provider (OpenAI, Claude, Ollama, AzureOpenAI, AwsBedrock, HuggingFace, plus AdditionalProviders.cs) has real HTTP client integration, proper error handling, streaming support, and no simulation/mock code. Each must implement IAIProvider with real API calls.

    3. **KnowledgeSystem**: Verify KnowledgeObject creation, provenance tracking, temporal queries work correctly.

    4. **Verify plugin isolation**: Check the .csproj file to ensure ONLY DataWarehouse.SDK is referenced as a ProjectReference. No other plugin references allowed.

    For EACH file: grep for NotImplementedException, "TODO", "placeholder", "simulation", "mock", "stub", "fake". Any found = fix immediately with production code.

    CRITICAL: Do NOT add new NuGet package references to provider SDKs unless they are already in the .csproj. The strategies should use HTTP clients directly or have conditional compilation for SDK availability. Per Rule 13, no simulations -- but real HTTP client calls to provider APIs are acceptable as production implementations.
  </action>
  <verify>
    Run: `dotnet build Plugins/DataWarehouse.Plugins.UltimateIntelligence/DataWarehouse.Plugins.UltimateIntelligence.csproj --no-restore`
    Grep plugin orchestrator, providers, and KnowledgeSystem for: NotImplementedException, "TODO:", "placeholder", "simulation", "mock", "stub"
    Both must pass (build succeeds, no forbidden patterns found).
  </verify>
  <done>
    Plugin orchestrator, all AI provider strategies, and KnowledgeSystem verified production-ready. Zero NotImplementedException. Build succeeds.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix gaps in core/providers/knowledge and update TODO.md</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/UltimateIntelligencePlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/KnowledgeSystem.cs
    Plugins/DataWarehouse.Plugins.UltimateIntelligence/Strategies/Providers/*.cs
    Metadata/TODO.md
  </files>
  <action>
    Based on findings from Task 1:

    1. **Fix any gaps found**: If any provider strategy or KnowledgeSystem has NotImplementedException, placeholder logic, empty catch blocks, or incomplete implementations -- implement them fully. Follow the patterns from 02-RESEARCH.md (IAIProvider interface, IntelligenceStrategyBase, KnowledgeObject envelope).

    2. **Verify message bus integration**: Ensure all inter-plugin communication goes through MessageBus, not direct references.

    3. **Update TODO.md**: For T90 sub-tasks related to the plugin core, providers, and KnowledgeSystem, change `[ ]` to `[x]` in Metadata/TODO.md. Mark only items that are genuinely complete. Leave vector store, knowledge graph, feature, and memory items for plan 02-02.

    4. **Build the full solution** to ensure no regressions: `dotnet build DataWarehouse.slnx --no-restore`
  </action>
  <verify>
    Run: `dotnet build DataWarehouse.slnx --no-restore` -- must succeed
    Verify TODO.md has been updated with [x] for completed T90 core/provider items
  </verify>
  <done>
    T90 core/provider/knowledge sub-tasks verified and marked in TODO.md. Plugin builds cleanly as part of the full solution. No inter-plugin references exist.
  </done>
</task>

</tasks>

<verification>
- `dotnet build Plugins/DataWarehouse.Plugins.UltimateIntelligence/DataWarehouse.Plugins.UltimateIntelligence.csproj --no-restore` succeeds
- `dotnet build DataWarehouse.slnx --no-restore` succeeds
- Zero instances of NotImplementedException in plugin core, providers, KnowledgeSystem
- Zero instances of simulation/placeholder/mock/stub in production code
- TODO.md T90 core items updated to reflect actual completion status
- Plugin .csproj references only DataWarehouse.SDK
</verification>

<success_criteria>
UniversalIntelligence plugin orchestrator, all AI provider strategies, and KnowledgeObject envelope system are fully production-ready. T90 core items in TODO.md accurately reflect completion status.
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-infrastructure/02-01-SUMMARY.md`
</output>
