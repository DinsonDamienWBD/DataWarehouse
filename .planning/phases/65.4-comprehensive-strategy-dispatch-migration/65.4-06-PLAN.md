---
phase: 65.4-comprehensive-strategy-dispatch-migration
plan: 06
type: execute
wave: 3
depends_on: ["65.4-01", "65.4-02", "65.4-03"]
files_modified:
  - Plugins/DataWarehouse.Plugins.UltimateDataTransit/UltimateDataTransitPlugin.cs
  - Plugins/DataWarehouse.Plugins.UltimateDataTransit/TransitStrategyRegistry.cs
  - Plugins/DataWarehouse.Plugins.UltimateResilience/UltimateResiliencePlugin.cs
  - Plugins/DataWarehouse.Plugins.UltimateResilience/ResilienceStrategyRegistry.cs
  - Plugins/DataWarehouse.Plugins.UltimateDataMesh/UltimateDataMeshPlugin.cs
  - Plugins/DataWarehouse.Plugins.UltimateDataMesh/DataMeshStrategyRegistry.cs
  - Plugins/DataWarehouse.Plugins.UltimateWorkflow/UltimateWorkflowPlugin.cs
  - Plugins/DataWarehouse.Plugins.UltimateWorkflow/WorkflowStrategyRegistry.cs
autonomous: true

must_haves:
  truths:
    - "UltimateDataTransit uses inherited TransitPluginBase dispatch instead of standalone TransitStrategyRegistry"
    - "UltimateResilience uses inherited ResiliencePluginBase dispatch instead of standalone ResilienceStrategyRegistry"
    - "UltimateDataMesh uses inherited dispatch instead of standalone DataMeshStrategyRegistry"
    - "UltimateWorkflow uses inherited dispatch instead of standalone WorkflowStrategyRegistry"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateDataTransit/UltimateDataTransitPlugin.cs"
      provides: "Migrated transit plugin"
      contains: "RegisterTransitStrategy"
    - path: "Plugins/DataWarehouse.Plugins.UltimateResilience/UltimateResiliencePlugin.cs"
      provides: "Migrated resilience plugin"
      contains: "RegisterResilienceStrategy|RegisterStrategy"
  key_links:
    - from: "Plugins/DataWarehouse.Plugins.UltimateDataTransit/UltimateDataTransitPlugin.cs"
      to: "DataWarehouse.SDK/Contracts/Hierarchy/DataPipeline/DataTransitPluginBase.cs"
      via: "inherited strategy dispatch"
      pattern: "RegisterTransitStrategy"
---

<objective>
Migrate UltimateDataTransit, UltimateResilience, UltimateDataMesh, and UltimateWorkflow plugins from standalone custom registries to inherited base class dispatch.

Purpose: These 4 plugins have DUPLICATE Pattern A registries that exactly match StrategyRegistry<T>.
Output: 4 plugins using base class dispatch, standalone registries marked [Obsolete].
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/65.4-comprehensive-strategy-dispatch-migration/65.4-01-SUMMARY.md
@.planning/phases/65.4-comprehensive-strategy-dispatch-migration/65.4-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate UltimateDataTransit and UltimateResilience</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateDataTransit/UltimateDataTransitPlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateDataTransit/TransitStrategyRegistry.cs
    Plugins/DataWarehouse.Plugins.UltimateResilience/UltimateResiliencePlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateResilience/ResilienceStrategyRegistry.cs
  </files>
  <action>
For each plugin, follow the EXACT same migration process as Plan 05:

**UltimateDataTransit:**
1. Read plugin file, find all `TransitStrategyRegistry` references
2. This inherits DataTransitPluginBase (from Plan 02). Replace custom registry with inherited `TransitStrategyRegistry` (StrategyRegistry<IDataTransitStrategy>)
3. Replace: `Register()` -> `RegisterTransitStrategy()`, `GetStrategy()` -> `TransitStrategyRegistry.Get()`, `DiscoverStrategies()` -> `TransitStrategyRegistry.DiscoverFromAssembly()`, etc.
4. Mark `TransitStrategyRegistry.cs` with `[Obsolete]`
5. Check feature files for references

**UltimateResilience:**
1. Read plugin file, find all `ResilienceStrategyRegistry` references
2. This inherits ResiliencePluginBase (from Plan 04). Replace custom registry with inherited dispatch
3. Same mapping of methods
4. Mark `ResilienceStrategyRegistry.cs` with `[Obsolete]`

If any custom method has no equivalent, create a thin wrapper that delegates to the inherited registry's `GetByPredicate()` or `GetAll()`.

CRITICAL: Zero regression. Strategy discovery and resolution must work identically.
  </action>
  <verify>
Run: `dotnet build Plugins/DataWarehouse.Plugins.UltimateDataTransit/ --no-restore && dotnet build Plugins/DataWarehouse.Plugins.UltimateResilience/ --no-restore` -- 0 errors.
  </verify>
  <done>UltimateDataTransit and UltimateResilience migrated. Custom registries marked [Obsolete].</done>
</task>

<task type="auto">
  <name>Task 2: Migrate UltimateDataMesh and UltimateWorkflow</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateDataMesh/UltimateDataMeshPlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateDataMesh/DataMeshStrategyRegistry.cs
    Plugins/DataWarehouse.Plugins.UltimateWorkflow/UltimateWorkflowPlugin.cs
    Plugins/DataWarehouse.Plugins.UltimateWorkflow/WorkflowStrategyRegistry.cs
  </files>
  <action>
Same migration pattern:

**UltimateDataMesh:**
1. Read plugin file, find `DataMeshStrategyRegistry` references
2. Determine base class. If DataManagementPluginBase (from Plan 04), use inherited dispatch. If another base, use PluginBase.StrategyRegistry
3. Replace custom registry calls with inherited equivalents
4. Mark `DataMeshStrategyRegistry.cs` with `[Obsolete]`

**UltimateWorkflow:**
1. Read plugin file, find `WorkflowStrategyRegistry` references
2. Determine base class. If OrchestrationPluginBase (from Plan 04), use inherited dispatch. Otherwise PluginBase.StrategyRegistry
3. Replace custom registry calls
4. Mark `WorkflowStrategyRegistry.cs` with `[Obsolete]`

For both: Keep thin wrappers for any custom convenience methods not directly available on StrategyRegistry<T>.

CRITICAL: Zero regression.
  </action>
  <verify>
Run: `dotnet build Plugins/DataWarehouse.Plugins.UltimateDataMesh/ --no-restore && dotnet build Plugins/DataWarehouse.Plugins.UltimateWorkflow/ --no-restore` -- 0 errors.
  </verify>
  <done>UltimateDataMesh and UltimateWorkflow migrated. Custom registries marked [Obsolete].</done>
</task>

</tasks>

<verification>
- All 4 plugins build with 0 errors
- Standalone registry files marked [Obsolete]
</verification>

<success_criteria>
UltimateDataTransit, UltimateResilience, UltimateDataMesh, UltimateWorkflow all migrated to base class dispatch.
</success_criteria>

<output>
After completion, create `.planning/phases/65.4-comprehensive-strategy-dispatch-migration/65.4-06-SUMMARY.md`
</output>
