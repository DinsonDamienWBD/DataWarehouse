---
phase: 54-feature-gap-closure
plan: 08
type: execute
wave: 2
depends_on: [54-04]
files_modified:
  - Plugins/DataWarehouse.Plugins.UniversalObservability/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateCompliance/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateDataGovernance/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateDataPrivacy/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateDeployment/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateMultiCloud/Strategies/**
  - DataWarehouse.CLI/**
  - DataWarehouse.GUI/**
autonomous: true

must_haves:
  truths:
    - "Observability dashboard services have persistence and real-time transport"
    - "Governance policy dashboards complete with monitoring integration"
    - "Kubernetes CSI driver fully implemented"
    - "CLI reaches 80% with natural language parsing and REPL"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateDeployment/Strategies/"
      provides: "K8s CSI driver at 100%"
    - path: "DataWarehouse.CLI/"
      provides: "CLI at 80%+ with NLP, REPL, scripting"
  key_links:
    - from: "CLI commands"
      to: "message bus"
      via: "command -> bus topic routing"
      pattern: "MessageBus.*Request"
---

<objective>
Medium Effort: Domains 14-17 features at 50-79% — Observability (20), Governance (88), Cloud (33), CLI/GUI (42) = ~183 features.

Purpose: Close the medium-priority gaps in observability, governance, cloud, and CLI/GUI. CLI/GUI at 6% is the most critical gap — blocking for production readiness. Governance dashboards and K8s CSI are high-priority for enterprise deployments.

Output: ~183 features moved from 50-79% to 100% (or higher) across observability, governance, cloud, and CLI/GUI.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/PLUGIN-CATALOG.md
@.planning/phases/42-feature-verification-matrix/domains-14-17-summary.md
@.planning/phases/54-feature-gap-closure/54-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Observability + Governance Medium Features (108 features)</name>
  <files>
    Plugins/DataWarehouse.Plugins.UniversalObservability/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateCompliance/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateDataGovernance/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateDataPrivacy/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateDataLineage/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateDataQuality/Strategies/**
    Plugins/DataWarehouse.Plugins.UniversalDashboards/**
  </files>
  <action>
Complete all Domain 14 and 15 features at 50-79%.

**Domain 14 — Observability (20 features at 50-79%)**:
- RUM monitoring (6 at 50-60%): GA4 Measurement Protocol integration, Amplitude HTTP API, Mixpanel track API — implement event ingestion, session tracking, user identification, funnel analysis. Use SharedHttpClient pattern.
- Synthetic monitoring (4 at 55%): Pingdom/UptimeRobot/StatusCake API integration — implement availability checks, response time measurement, SSL certificate monitoring, alert triggers. Use SharedHttpClient.
- Dashboard services (10 at 50%): Implement dashboard data persistence (use existing storage via bus), real-time updates (WebSocket push via bus), multi-tenant dashboard isolation (tenant scoping), widget configuration storage, dashboard sharing/embedding

**Domain 15 — Governance (88 features at 50-79%)**:
- Lineage advanced (15 at 60-75%): Lineage versioning (track lineage graph changes over time), impact blast radius calculation (BFS from modified node, count affected downstream), lineage diff (compare lineage at two points in time), cross-system lineage (federated lineage across message bus boundaries)
- Retention automation (10 at 65-70%): Retention policy evaluation engine (scheduled scans), automated archival (move expired data to cold storage via bus), legal hold management (prevent deletion during litigation), retention audit reports, policy exception tracking
- Privacy ML (8 at 60%): Differential privacy epsilon/delta tracking, privacy budget enforcement across queries, federated analytics (compute on encrypted/masked data), synthetic data generation for testing, PII detection confidence scoring
- Policy dashboards (50 at 50-60%): Governance policy management UI data layer — policy CRUD, version history, approval workflows, policy testing sandbox, compliance gap visualization data, effectiveness metrics aggregation. Note: Only implement data layer and API — actual UI rendering is CLI/GUI scope.
- Remaining governance (5): Data classification confidence calibration, stewardship assignment workflow, quality SLA enforcement automation

Pattern: Dashboard features need data persistence via storage bus topic, real-time updates via a push mechanism, and tenant isolation. Privacy features need careful epsilon budget tracking and privacy accounting.
  </action>
  <verify>
dotnet build DataWarehouse.slnx — zero errors
Dashboard services: data persists across restarts, real-time updates work
Lineage: BFS traversal with blast radius calculation functional
Privacy: epsilon budget tracking accurate
  </verify>
  <done>All 108 Domain 14+15 features at 50-79% brought to 100%</done>
</task>

<task type="auto">
  <name>Task 2: Cloud (K8s CSI, Multi-Cloud) + CLI/GUI (75 features)</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateDeployment/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateMultiCloud/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateSustainability/Strategies/**
    DataWarehouse.CLI/**
    DataWarehouse.GUI/**
  </files>
  <action>
Complete all Domain 16 and 17 features at 50-79% (and below).

**Domain 16 — Cloud (33 features at 50-79%)**:
- Kubernetes CSI driver (20%): Implement full CSI spec — Identity service (GetPluginInfo, Probe), Controller service (CreateVolume, DeleteVolume, ControllerPublishVolume, ControllerUnpublishVolume, ValidateVolumeCapabilities, ListVolumes, GetCapacity, CreateSnapshot, DeleteSnapshot), Node service (NodeStageVolume, NodeUnstageVolume, NodePublishVolume, NodeUnpublishVolume, NodeGetCapabilities, NodeGetInfo). Volume lifecycle with PV/PVC mapping.
- Multi-cloud advanced (8 at 65-70%): Cross-cloud replication conflict resolution (LWW with vector clocks), multi-cloud failover automation (health probe -> failover trigger -> DNS update), cost optimization (spot pricing analysis, reserved instance recommendations), cloud arbitrage (workload placement based on real-time pricing)
- Sustainability (15 at 55%): Carbon-aware scheduling (WattTime API for carbon intensity), energy consumption tracking per operation, renewable energy preference (route to green regions), carbon budget enforcement, GHG Protocol reporting (Scope 1/2/3)
- Deployment dashboards (9 at 50%): Deployment pipeline visualization data, rollback history, canary metrics aggregation, blue/green cutover status

**Domain 17 — CLI/GUI (42 features, most <50%)**:
NOTE: CLI/GUI at 6% average is the most critical gap. Implement the highest-impact features:

CLI (targeting 80%):
- Natural language command parsing: Use existing UltimateIntelligence NLP via bus topic (intelligence.nlp.parse). Map natural language to System.CommandLine commands. Examples: "show storage usage" -> StorageCommands.Usage, "backup my data" -> BackupCommands.Create
- Interactive REPL: Build on System.CommandLine with readline-style input, command history (in-memory ring buffer, persist to ~/.datawarehouse/history), tab completion for commands/arguments/values, context-aware suggestions
- CLI scripting: Script file parser (.dw extension), variable substitution, conditionals (if/else), loops (foreach), error handling (try/catch), output capture
- Rich terminal output: Table formatting (Spectre.Console or manual ANSI), progress bars for long operations, color-coded severity levels, JSON/YAML output modes
- Pipe support: stdin/stdout integration, structured output (JSON) for piping, filtering via jq-style expressions
- Profiles: Named connection profiles (~/.datawarehouse/profiles.json), profile switching, environment variable override
- Resolve remaining 11 TODO markers in CLI commands with proper message bus integration

GUI (targeting 40% — basic functional):
- Dashboard framework: Basic real-time dashboard data model, widget types (chart, table, gauge, log), data source abstraction (bus subscription)
- Connection manager: Connect/disconnect to DataWarehouse instances, saved connections, health status display
- Storage browser: Browse objects in storage hierarchy, basic CRUD operations, file upload/download
- Configuration editor: View/edit configuration, validate changes, apply hot-reload

Pattern: CLI features should use message bus for all operations — each CLI command maps to a bus topic request/response. GUI uses MAUI Blazor Hybrid for cross-platform UI.
  </action>
  <verify>
dotnet build DataWarehouse.slnx — zero errors
CLI: REPL starts, commands execute via bus, tab completion works
K8s CSI: CSI identity/controller/node services implemented
Multi-cloud: failover automation with health probes
  </verify>
  <done>All 75 Domain 16+17 features brought to target completion levels</done>
</task>

</tasks>

<verification>
- dotnet build DataWarehouse.slnx succeeds with 0 errors, 0 warnings
- dotnet test passes all existing tests
- CLI REPL functional with bus integration
- K8s CSI driver implements full spec
</verification>

<success_criteria>
- ~183 features moved from below 80% to 100% (or significant improvement for CLI/GUI)
- Zero build errors or warnings
</success_criteria>

<output>
After completion, create `.planning/phases/54-feature-gap-closure/54-08-SUMMARY.md`
</output>
