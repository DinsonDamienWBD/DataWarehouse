---
phase: 54-feature-gap-closure
plan: 09
type: execute
wave: 3
depends_on: [54-05, 54-06]
files_modified:
  - Plugins/DataWarehouse.Plugins.UltimateConnector/Strategies/**
  - Plugins/DataWarehouse.Plugins.AdaptiveTransport/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateDataTransit/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateDataIntegration/Strategies/**
  - Plugins/DataWarehouse.Plugins.UltimateStorageProcessing/Strategies/**
autonomous: true

must_haves:
  truths:
    - "Cloud SDK connectors (AWS S3, Azure Blob, GCP Storage) fully wired with real NuGet packages"
    - "Database connectors (PostgreSQL, MySQL, MongoDB, Redis) fully integrated"
    - "Transport protocols (HTTP/2, gRPC, QUIC) operational"
    - "Data integration ETL transformation engine functional"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateConnector/Strategies/"
      provides: "280+ connector strategies with real SDK integrations"
    - path: "Plugins/DataWarehouse.Plugins.UltimateDataIntegration/"
      provides: "ETL transformation engine"
  key_links:
    - from: "UltimateConnector"
      to: "cloud SDKs"
      via: "NuGet package references"
      pattern: "AWSSDK|Azure|Google\\.Cloud"
---

<objective>
Major Gaps: Domain 9-13 Transport/Connector Layer — 1,034+ metadata-only features requiring real SDK integration.

Purpose: Domains 9-13 have 93.4% of features as metadata-only (strategy IDs registered but zero implementation). The critical path is wiring real cloud SDKs (AWS, Azure, GCP), database clients, and AI providers. This is the largest and most impactful single plan — converting strategy stubs into real implementations.

SCOPE LIMITATION: Focus on the TOP 50 most critical connectors (cloud storage, messaging, database, AI) rather than all 1,034. Remaining connectors will need additional plans.

Output: Top 50 critical connectors wired with real NuGet SDK packages and production-ready implementations.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/PLUGIN-CATALOG.md
@.planning/phases/42-feature-verification-matrix/domains-9-13-summary.md
@.planning/phases/54-feature-gap-closure/54-05-SUMMARY.md
@.planning/phases/54-feature-gap-closure/54-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Critical Cloud + Database Connectors (30 connectors)</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateConnector/Strategies/Cloud/**
    Plugins/DataWarehouse.Plugins.UltimateConnector/Strategies/Database/**
    Plugins/DataWarehouse.Plugins.UltimateConnector/Strategies/Messaging/**
  </files>
  <action>
Wire the top 30 most critical connectors with real NuGet SDK packages.

IMPORTANT: Before implementing ANY connector, check if UltimateStorage already has a working implementation for that service. Many cloud storage connectors are already at 90%+ in UltimateStorage. UltimateConnector handles non-storage connections (messaging, compute, AI, SaaS).

**Cloud Storage Connectors (if not already in UltimateStorage)**:
- AWS S3: Use AWSSDK.S3 NuGet. Implement PutObject, GetObject, DeleteObject, ListObjects, Multipart upload, presigned URLs, bucket lifecycle. Connection: AmazonS3Client with credential chain (env, profile, IAM role).
- Azure Blob: Use Azure.Storage.Blobs NuGet. Implement Upload, Download, Delete, List, tier management, access tiers (Hot/Cool/Archive), SAS token generation. Connection: BlobServiceClient with DefaultAzureCredential.
- GCP Storage: Use Google.Cloud.Storage.V1 NuGet. Implement InsertObject, GetObject, DeleteObject, ListObjects, lifecycle rules, signed URLs. Connection: StorageClient with GoogleCredential.

**Cloud Messaging Connectors**:
- AWS SQS (5%): Use AWSSDK.SQS NuGet. SendMessage, ReceiveMessage, DeleteMessage, queue management, visibility timeout, dead letter queue, long polling, FIFO queues.
- AWS SNS (5%): Use AWSSDK.SimpleNotificationService NuGet. Publish, Subscribe, topic management, filter policies, message attributes.
- Azure ServiceBus (5%): Use Azure.Messaging.ServiceBus NuGet. Send, Receive, queue/topic/subscription management, sessions, dead letter, scheduled messages.
- Azure EventHub (5%): Use Azure.Messaging.EventHubs NuGet. Send, Receive with consumer groups, partition management, checkpoint store.
- GCP Pub/Sub (5%): Use Google.Cloud.PubSub.V1 NuGet. Publish, Pull/StreamingPull, topic/subscription management, dead letter, ordering keys.
- Kafka (60%): Enhance existing with Confluent.Kafka NuGet. Producer/consumer, consumer groups, exactly-once (transactional), schema registry integration.

**Database Connectors**:
- PostgreSQL (5%): Use Npgsql NuGet. Connection pooling, query execution, prepared statements, COPY for bulk insert, LISTEN/NOTIFY, JSON support.
- MySQL (5%): Use MySqlConnector NuGet. Connection pooling, query execution, bulk insert, stored procedures.
- MongoDB (5%): Use MongoDB.Driver NuGet. CRUD operations, aggregation pipeline, change streams, transactions, GridFS for large files.
- Redis (5%): Use StackExchange.Redis NuGet. String/Hash/List/Set/SortedSet, pub/sub, streams, Lua scripting, cluster support.
- Cassandra (5%): Use CassandraCSharpDriver NuGet. Prepare/Execute, batch statements, lightweight transactions, tunable consistency.
- Elasticsearch (5%): Use Elastic.Clients.Elasticsearch NuGet. Index/Search/Bulk, query DSL, aggregations, scroll, index lifecycle management.
- SQL Server (5%): Use Microsoft.Data.SqlClient NuGet. Connection pooling, parameterized queries, bulk copy, Always Encrypted.
- DynamoDB (5%): Use AWSSDK.DynamoDBv2 NuGet. PutItem, GetItem, Query, Scan, BatchWriteItem, transactions, TTL.
- CosmosDB (5%): Use Microsoft.Azure.Cosmos NuGet. CRUD, change feed, stored procedures, triggers, UDFs.

**Messaging/Streaming Connectors**:
- RabbitMQ (5%): Use RabbitMQ.Client NuGet. Publish, consume, exchange/queue management, confirms, dead letter.
- NATS (5%): Use NATS.Client NuGet. Pub/sub, request/reply, JetStream for persistence.

Each connector MUST follow the pattern:
1. Add NuGet PackageReference to plugin .csproj
2. Implement strategy extending appropriate StrategyBase
3. Connection management: create, validate, dispose with IDisposable
4. Operations: CRUD + specialized features
5. Error handling: retry with exponential backoff, circuit breaker
6. Health check: can-connect probe
7. Metrics: operation count, latency, error rate via observability bus
8. Configuration: connection string/endpoint validation

CRITICAL: All connectors delegate auth to UltimateAccessControl, encryption to UltimateEncryption, hashing to UltimateDataIntegrity via bus. No inline crypto.
  </action>
  <verify>
dotnet build DataWarehouse.slnx — zero errors
Each connector: NuGet reference present, strategy compiles, connection management implemented
No inline crypto/hashing (AD-11)
  </verify>
  <done>Top 30 cloud, database, and messaging connectors wired with real NuGet SDKs and production-ready implementations</done>
</task>

<task type="auto">
  <name>Task 2: AI Provider + Data Integration Connectors (20 connectors)</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateConnector/Strategies/AI/**
    Plugins/DataWarehouse.Plugins.UltimateDataIntegration/Strategies/**
    Plugins/DataWarehouse.Plugins.UltimateStorageProcessing/Strategies/**
  </files>
  <action>
Wire AI provider connectors and data integration features.

**AI Provider Connectors (10)**:
- OpenAI (5%): Use Azure.AI.OpenAI or OpenAI NuGet. ChatCompletion (GPT-4), Embeddings (text-embedding-3-small/large), Image generation (DALL-E), Audio transcription (Whisper). Streaming support for ChatCompletion.
- Anthropic (5%): Use Anthropic NuGet or HTTP client. Messages API (Claude), streaming, tool use.
- Azure OpenAI (5%): Use Azure.AI.OpenAI NuGet. Same as OpenAI but with Azure endpoint/key auth.
- Google Vertex AI (5%): Use Google.Cloud.AIPlatform.V1 NuGet. PredictAsync, GenerateContentAsync.
- HuggingFace (5%): HTTP client to Inference API. Model inference, text generation, embeddings.
- Vector DB — ChromaDB (5%): HTTP client. Collection management, add/query/delete embeddings, metadata filtering.
- Vector DB — Pinecone (5%): Use Pinecone NuGet. Index management, upsert/query/delete vectors, namespace support.
- Vector DB — Qdrant (5%): HTTP/gRPC client. Collection management, point operations, filtering, payload indexing.
- Vector DB — Weaviate (5%): HTTP client. Schema management, object CRUD, vector search, hybrid search.
- ONNX Runtime (15%): Use Microsoft.ML.OnnxRuntime NuGet. Model loading (file, stream), inference session management, input/output tensor handling, execution providers (CPU, CUDA, DirectML).

**Data Integration ETL (10)**:
- Column mapping engine: Source-to-target column mapping with type conversion, null handling, default values, expression evaluation
- Type conversion: Comprehensive type system (numeric, string, date, binary, complex) with configurable precision, overflow handling, culture-aware parsing
- Validation rules: Required fields, regex patterns, range checks, referential integrity, custom validators
- Error handling: Row-level error tracking, error threshold (stop after N errors), error routing (dead letter, log, skip)
- Bulk operations: Batch insert/upsert with configurable batch size, parallel batches, progress tracking
- Schema evolution: Detect schema changes, automatic column add/rename/type-change, migration scripts
- CDC processing: Capture change events (insert/update/delete), apply ordering, idempotent replay, last-position tracking
- Data quality scoring: Completeness, accuracy, consistency, timeliness scoring per column and dataset
- Transformation functions: String manipulation, date arithmetic, conditional logic, aggregation, pivot/unpivot
- Pipeline orchestration: Multi-step pipeline definition, step dependencies, parallel steps, checkpoint/restart

Pattern: AI connectors should use SharedHttpClient for HTTP-based APIs. All AI operations should also be available via UltimateIntelligence bus topics for other plugins to consume.
  </action>
  <verify>
dotnet build DataWarehouse.slnx — zero errors
AI connectors: NuGet references present, API calls structured correctly
ETL engine: column mapping, type conversion, validation rules functional
  </verify>
  <done>Top 20 AI and data integration connectors wired with real implementations</done>
</task>

</tasks>

<verification>
- dotnet build DataWarehouse.slnx succeeds with 0 errors, 0 warnings
- dotnet test passes all existing tests
- 50 critical connectors have real NuGet SDK packages
- No inline crypto/hashing/transport (AD-11)
</verification>

<success_criteria>
- Top 50 critical connectors (cloud, database, AI, messaging) wired with real SDKs
- ETL transformation engine functional
- Zero build errors or warnings
</success_criteria>

<output>
After completion, create `.planning/phases/54-feature-gap-closure/54-09-SUMMARY.md`
</output>
