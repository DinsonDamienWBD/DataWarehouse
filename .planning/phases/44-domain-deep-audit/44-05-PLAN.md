---
phase: 44
plan: 44-05
title: "Domain Audit: Hardware + Edge + IoT (Domains 6-7)"
depends_on: []
---

# Plan 44-05: Domain Audit: Hardware + Edge + IoT (Domains 6-7)

## Goal
Conduct hostile review of hardware, edge computing, and IoT domains. Verify hardware probe accuracy per platform, NVMe/NUMA/QAT graceful fallback when absent, GPIO/I2C/SPI bus controllers, bounded memory runtime, and sensor fusion.

## Approach
1. **Read Actual Plugin Code**:
   - `DataWarehouse.SDK/Hardware/` — hardware abstraction layer
   - `Plugins/DataWarehouse.Plugins.UltimateIoTIntegration/` — IoT protocols, sensor management
   - `Plugins/DataWarehouse.Plugins.UltimateEdgeComputing/` — edge deployment, bounded resources

2. **Hardware Probe Accuracy Verification (per platform)**:
   - Read hardware detection code
   - Verify Windows probes:
     - WMI: Win32_Processor, Win32_DiskDrive, Win32_NetworkAdapter, Win32_VideoController
     - Registry: HKLM\HARDWARE\DESCRIPTION\System
     - Device Manager: enumerate devices via SetupAPI
   - Verify Linux probes:
     - /proc: /proc/cpuinfo, /proc/meminfo, /proc/mounts, /proc/net/dev
     - /sys: /sys/class/block, /sys/class/net, /sys/devices
     - lspci, lsusb, lshw (fallback to commands when sysfs unavailable)
   - Verify macOS probes:
     - sysctl: hw.ncpu, hw.memsize, hw.model
     - IOKit: enumerate devices via IOService
   - Verify cross-platform consistency (same hardware reported identically on all platforms)

3. **NVMe/NUMA/QAT Graceful Fallback Verification**:
   - NVMe:
     - Verify NVMe detection (lspci on Linux, DeviceIoControl on Windows)
     - Verify direct NVMe I/O when available
     - Verify fallback to standard block I/O when NVMe absent
   - NUMA:
     - Verify NUMA topology detection (libnuma on Linux, GetNumaHighestNodeNumber on Windows)
     - Verify NUMA-aware memory allocation when available
     - Verify fallback to standard malloc when NUMA absent
   - QAT (Intel QuickAssist Technology):
     - Verify QAT detection (lspci, /dev/qat_*)
     - Verify hardware-accelerated crypto when QAT available
     - Verify fallback to software crypto when QAT absent
   - Verify no crashes when hardware absent
   - Verify performance degradation is acceptable (not catastrophic)

4. **GPIO/I2C/SPI Bus Controller Verification**:
   - GPIO (General Purpose Input/Output):
     - Verify GPIO pin enumeration (sysfs: /sys/class/gpio)
     - Verify pin direction (input/output)
     - Verify pin read/write
     - Verify interrupt handling (edge detection)
   - I2C (Inter-Integrated Circuit):
     - Verify I2C bus enumeration (/dev/i2c-*)
     - Verify device addressing (7-bit, 10-bit)
     - Verify read/write transactions
     - Verify SMBus protocol support
   - SPI (Serial Peripheral Interface):
     - Verify SPI bus enumeration (/dev/spidev*)
     - Verify chip select
     - Verify transfer (full-duplex, half-duplex)
     - Verify mode configuration (CPOL, CPHA)
   - Verify error handling (bus busy, device not responding)

5. **Bounded Memory Runtime Verification**:
   - Read edge computing code
   - Verify memory budget enforcement (max heap size, max object count)
   - Verify graceful degradation when memory exhausted (evict cache, reject new data)
   - Verify no unbounded collections (all lists/maps have max size)
   - Test on resource-constrained environment (Raspberry Pi, embedded device)

6. **Sensor Fusion Verification**:
   - Read sensor management code
   - Verify multi-sensor data aggregation (accelerometer + gyroscope + magnetometer → orientation)
   - Verify timestamp synchronization (align samples from different sensors)
   - Verify outlier detection (reject sensor readings outside expected range)
   - Verify Kalman filter implementation (state estimation, covariance update)

## Scope
**In Scope:**
- Domain 6: Hardware
- Domain 7: Edge + IoT
- SDK hardware layer, UltimateIoTIntegration, UltimateEdgeComputing
- Hardware probes (Windows, Linux, macOS)
- NVMe/NUMA/QAT graceful fallback
- GPIO/I2C/SPI bus controllers
- Bounded memory runtime
- Sensor fusion

**Out of Scope:**
- Domains 1-5 — Plans 44-01 through 44-04
- Domains 8-17 — Plans 44-06 through 44-09

## Success Criteria
- [ ] Hardware probes verified (Windows: WMI, Linux: /proc+/sys, macOS: sysctl+IOKit)
- [ ] Cross-platform consistency verified (same hardware, same report)
- [ ] NVMe graceful fallback verified (direct I/O → standard I/O)
- [ ] NUMA graceful fallback verified (NUMA allocation → standard malloc)
- [ ] QAT graceful fallback verified (hardware crypto → software crypto)
- [ ] No crashes when NVMe/NUMA/QAT absent
- [ ] GPIO verified (pin enumeration, direction, read/write, interrupts)
- [ ] I2C verified (bus enumeration, addressing, transactions, SMBus)
- [ ] SPI verified (bus enumeration, chip select, transfer, mode config)
- [ ] Bounded memory verified (max heap, max objects, graceful degradation)
- [ ] No unbounded collections (all lists/maps have max size)
- [ ] Sensor fusion verified (multi-sensor aggregation, timestamp sync, outlier detection, Kalman filter)
- [ ] All findings documented with file path, line number, severity

## Output
- `AUDIT-FINDINGS-02-domains-6-7.md`: Findings for hardware, edge, and IoT domains
  - Hardware probe verification results (Windows, Linux, macOS)
  - NVMe/NUMA/QAT fallback verification results
  - GPIO/I2C/SPI bus controller verification results
  - Bounded memory verification results
  - Sensor fusion verification results
  - All gaps, stubs, placeholders, incomplete implementations
  - Severity: CRITICAL (crash on missing hw), HIGH (incorrect detection), MEDIUM (performance), LOW (minor)
