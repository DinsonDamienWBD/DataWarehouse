---
phase: 63-universal-fabric
plan: 15
type: execute
wave: 5
depends_on: ["63-04", "63-05", "63-06", "63-07", "63-08", "63-09", "63-10"]
files_modified:
  - DataWarehouse.slnx
  - Plugins/DataWarehouse.Plugins.UniversalFabric/DataWarehouse.Plugins.UniversalFabric.csproj
autonomous: true

must_haves:
  truths:
    - "UniversalFabric plugin added to solution and builds with zero errors"
    - "Full solution builds with zero errors including all cloud SDK NuGet dependencies"
    - "Plugin registers correctly with kernel message bus"
  artifacts:
    - path: "DataWarehouse.slnx"
      provides: "Solution file including UniversalFabric plugin"
      contains: "UniversalFabric"
  key_links:
    - from: "DataWarehouse.slnx"
      to: "Plugins/DataWarehouse.Plugins.UniversalFabric/DataWarehouse.Plugins.UniversalFabric.csproj"
      via: "solution reference"
      pattern: "UniversalFabric"
---

<objective>
Final build verification and solution integration for the Universal Storage Fabric.

Purpose: Ensure the entire solution builds with zero errors after all Phase 63 changes: new SDK types, UniversalFabric plugin, cloud SDK NuGet dependencies, and S3 server implementation. Fix any integration issues.

Output: Clean solution build with UniversalFabric plugin integrated.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/PLUGIN-CATALOG.md
@DataWarehouse.slnx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add UniversalFabric to solution and verify SDK build</name>
  <files>DataWarehouse.slnx</files>
  <action>
1. Add UniversalFabric plugin to solution:
   `dotnet sln DataWarehouse.slnx add Plugins/DataWarehouse.Plugins.UniversalFabric/DataWarehouse.Plugins.UniversalFabric.csproj`

2. Restore all NuGet packages (including new cloud SDK dependencies):
   `dotnet restore DataWarehouse.slnx`

3. Build the SDK first to verify fabric contracts:
   `dotnet build DataWarehouse.SDK/DataWarehouse.SDK.csproj`

4. Build the UniversalFabric plugin:
   `dotnet build Plugins/DataWarehouse.Plugins.UniversalFabric/DataWarehouse.Plugins.UniversalFabric.csproj`

5. Build the UltimateStorage plugin (with new cloud SDK dependencies):
   `dotnet build Plugins/DataWarehouse.Plugins.UltimateStorage/DataWarehouse.Plugins.UltimateStorage.csproj`

6. Fix any compilation errors found. Common issues to watch for:
   - Missing using statements for new namespaces
   - Type conflicts between SDK and plugin types
   - NuGet version conflicts between cloud SDKs
   - Ambiguous references from cloud SDK types
  </action>
  <verify>dotnet build DataWarehouse.SDK/DataWarehouse.SDK.csproj 2>&1 | tail -3 && dotnet build Plugins/DataWarehouse.Plugins.UniversalFabric/DataWarehouse.Plugins.UniversalFabric.csproj 2>&1 | tail -3</verify>
  <done>SDK and UniversalFabric plugin build with zero errors</done>
</task>

<task type="auto">
  <name>Task 2: Full solution build and integration fix-up</name>
  <files>Plugins/DataWarehouse.Plugins.UniversalFabric/DataWarehouse.Plugins.UniversalFabric.csproj</files>
  <action>
1. Build full solution:
   `dotnet build DataWarehouse.slnx`

2. Analyze build output for errors across all 60+ plugins. Fix any that arise from:
   - New SDK types conflicting with existing types
   - Cloud SDK NuGet transitive dependency conflicts
   - Missing StorageFabricException if referenced by error normalization
   - Breaking changes in StorageAddress (new enum values in StorageAddressKind)

3. If cloud SDK NuGet packages cause version conflicts with existing dependencies:
   - Pin versions in Directory.Packages.props if using central package management
   - Or add explicit version constraints in affected .csproj files

4. Verify the plugin catalog alignment:
   - UniversalFabric should be acknowledged as a new plugin
   - Update PLUGIN-CATALOG.md with UniversalFabric entry under Interface & Observability or Storage & Filesystem layer

5. Run `dotnet build DataWarehouse.slnx --no-restore` to confirm clean build.

6. Verify test projects still compile (if any reference storage types):
   `dotnet build DataWarehouse.Tests/DataWarehouse.Tests.csproj 2>&1 | tail -5`
  </action>
  <verify>dotnet build DataWarehouse.slnx 2>&1 | tail -5</verify>
  <done>Full solution builds with zero errors; all 60+ existing plugins unaffected; UniversalFabric plugin integrated</done>
</task>

</tasks>

<verification>
- `dotnet build DataWarehouse.slnx` completes with 0 errors
- UniversalFabric listed in solution
- No existing plugin build regressions
</verification>

<success_criteria>
- Zero build errors across entire solution
- All NuGet packages restore cleanly
- No breaking changes to existing plugins
- UniversalFabric plugin discoverable by kernel
</success_criteria>

<output>
After completion, create `.planning/phases/63-universal-fabric/63-15-SUMMARY.md`
</output>
