---
phase: 90.5-production-code-review
plan: 10
type: manual
wave: 3
depends_on: ["90.5-04"]
files_modified: [Plugins/DataWarehouse.Plugins.UltimateDataManagement/]
autonomous: false

must_haves:
  truths:
    - "All 119 Task.CompletedTask no-ops are replaced with real data management logic"
    - "Data lifecycle, retention, archival strategies all work"
    - "No stub or no-op code paths remain"
    - "Wiring document explains data management workflows and policy enforcement"
  artifacts:
    - path: ".planning/phases/90.5-production-code-review/wiring/10-data-management-wiring.md"
      provides: "Complete wiring documentation for UltimateDataManagement"
  key_links:
    - from: "Plugins/DataWarehouse.Plugins.UltimateDataManagement/"
      to: "DataWarehouse.SDK/Contracts/"
      via: "Data management contract implementations"
---

<objective>
Production Code Review and Gap Closure for UltimateDataManagement plugin.

Purpose: Data management handles lifecycle, retention, archival, and tiering. 119 Task.CompletedTask no-ops mean most operations silently do nothing. This is a large remediation.

Output: Zero-gap UltimateDataManagement with comprehensive wiring documentation.
</objective>

<context>
@.planning/PROJECT.md
@.planning/PLUGIN-CATALOG.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Systematic Scan of UltimateDataManagement</name>
  <files>Plugins/DataWarehouse.Plugins.UltimateDataManagement/</files>
  <action>

    **MANDATORY PER-FILE REPORTING RULE:**
    Every single .cs file in the project directory MUST be individually listed in the findings report. No exceptions, no summarization across files. For each file report:
    - Full file path and total line count
    - Every finding (stub, no-op, gap, fake payload, TODO) with exact line number(s) and code snippet
    - If the file has zero issues, explicitly list it as: "filename.cs (N lines) â€” CLEAN, no issues"
    
    Do NOT skip any file. Do NOT group files together. Do NOT say "similar pattern in X files".
    Go through every line of code in every file. We are closing all gaps once and for all.
    Perform exhaustive scan for:
    1. All 119 Task.CompletedTask no-ops (locate each, classify by subsystem)
    2. NotImplementedException / NotSupportedException throws
    3. Fake payloads, placeholder data
    4. TODO/FIXME comments

    Group findings by functional area:
    - Data lifecycle management
    - Retention policy enforcement
    - Archival/tiering strategies
    - Data cataloging
    - Metadata management

    Present grouped findings to user with priority ordering.
  </action>
  <verify>User reviews findings and approves fix priorities</verify>
  <done>Complete inventory of all 119+ gaps presented to user by functional area</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Implement Data Management Fixes</name>
  <files>Plugins/DataWarehouse.Plugins.UltimateDataManagement/</files>
  <action>
    Implement all fixes by functional area:
    1. **Lifecycle**: Implement state transitions, expiry checks, cleanup
    2. **Retention**: Implement policy evaluation, data marking, deletion scheduling
    3. **Archival**: Implement tier movement, cold storage transitions
    4. **Catalog**: Implement metadata indexing and search
    5. **Each Task.CompletedTask**: Replace with real async operation

    Rescan and build: `dotnet build Plugins/DataWarehouse.Plugins.UltimateDataManagement/`
  </action>
  <verify>Rescan shows zero no-ops remaining, build succeeds</verify>
  <done>All 119 no-ops replaced with real logic, plugin builds clean</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Write Wiring Document</name>
  <files>.planning/phases/90.5-production-code-review/wiring/10-data-management-wiring.md</files>
  <action>
    Document: Data lifecycle state machine, retention policy evaluation flow, archival pipeline, tiering decisions, catalog integration, message bus events for lifecycle transitions.
  </action>
  <verify>User reviews wiring document</verify>
  <done>Wiring document complete, approved by user</done>
</task>

</tasks>

<verification>
- Zero Task.CompletedTask no-ops remaining
- Zero stubs remaining
- Plugin builds clean
- Wiring document complete
</verification>

<success_criteria>
UltimateDataManagement is 100% production-ready. All 119 no-ops replaced. Wiring document complete.
</success_criteria>

<output>
After completion, create `.planning/phases/90.5-production-code-review/90.5-10-SUMMARY.md`
</output>
