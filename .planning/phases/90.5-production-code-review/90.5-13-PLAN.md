---
phase: 90.5-production-code-review
plan: 13
type: manual
wave: 3
depends_on: ["90.5-04"]
files_modified: [Plugins/DataWarehouse.Plugins.UltimateRAID/]
autonomous: false

must_haves:
  truths:
    - "All ~5 throws are replaced with real RAID implementations"
    - "All 95 Task.CompletedTask no-ops are replaced with real RAID operations"
    - "RAID levels (0/1/5/6/10) all function correctly"
    - "Wiring document explains RAID topology, parity calculation, and rebuild flow"
  artifacts:
    - path: ".planning/phases/90.5-production-code-review/wiring/13-raid-wiring.md"
      provides: "Complete wiring documentation for UltimateRAID"
  key_links:
    - from: "Plugins/DataWarehouse.Plugins.UltimateRAID/"
      to: "DataWarehouse.SDK/VirtualDiskEngine/"
      via: "Block device abstraction for RAID arrays"
---

<objective>
Production Code Review and Gap Closure for UltimateRAID plugin.

Purpose: RAID provides data redundancy and performance. ~5 throws + 95 Task.CompletedTask mean RAID operations silently skip. Data redundancy is illusory.

Output: Zero-gap UltimateRAID with comprehensive wiring documentation.
</objective>

<context>
@.planning/PROJECT.md
@.planning/PLUGIN-CATALOG.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Systematic Scan of UltimateRAID</name>
  <files>Plugins/DataWarehouse.Plugins.UltimateRAID/</files>
  <action>

    **MANDATORY PER-FILE REPORTING RULE:**
    Every single .cs file in the project directory MUST be individually listed in the findings report. No exceptions, no summarization across files. For each file report:
    - Full file path and total line count
    - Every finding (stub, no-op, gap, fake payload, TODO) with exact line number(s) and code snippet
    - If the file has zero issues, explicitly list it as: "filename.cs (N lines) â€” CLEAN, no issues"
    
    Do NOT skip any file. Do NOT group files together. Do NOT say "similar pattern in X files".
    Go through every line of code in every file. We are closing all gaps once and for all.
    Perform exhaustive scan for:
    1. All ~5 throws (identify which RAID operations)
    2. All 95 Task.CompletedTask no-ops (group by RAID level and operation type)
    3. Parity calculations that return dummy data
    4. Rebuild operations that don't actually rebuild
    5. TODO/FIXME comments

    Group by RAID level: RAID-0 (stripe), RAID-1 (mirror), RAID-5 (single parity), RAID-6 (double parity), RAID-10 (mirror+stripe), RAID-Z variants.

    Present findings to user.
  </action>
  <verify>User reviews findings and approves fix plan</verify>
  <done>Complete inventory presented to user by RAID level</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Implement RAID Fixes</name>
  <files>Plugins/DataWarehouse.Plugins.UltimateRAID/</files>
  <action>
    Implement all fixes:
    1. **RAID-0**: Striping must distribute blocks across devices correctly
    2. **RAID-1**: Mirroring must write to all mirrors, read from any
    3. **RAID-5**: Single parity with XOR calculation, rotating parity
    4. **RAID-6**: Double parity with Reed-Solomon or equivalent
    5. **RAID-10**: Combined mirror+stripe
    6. **Rebuild**: Must reconstruct missing data from parity/mirrors
    7. **Scrub**: Must verify data integrity across all devices
    8. All 95 Task.CompletedTask: replace with real async RAID operations

    Rescan and build: `dotnet build Plugins/DataWarehouse.Plugins.UltimateRAID/`
  </action>
  <verify>Rescan clean, build succeeds, user confirms</verify>
  <done>All 100 gaps closed, plugin builds clean</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Write Wiring Document</name>
  <files>.planning/phases/90.5-production-code-review/wiring/13-raid-wiring.md</files>
  <action>
    Document: RAID level implementations, parity algorithms, stripe layout, rebuild process, scrub verification, device failure detection, hot spare activation, VDE block device integration.
  </action>
  <verify>User reviews wiring document</verify>
  <done>Wiring document complete, approved by user</done>
</task>

</tasks>

<verification>
- Zero throws/no-ops remaining
- All RAID levels functional
- Plugin builds clean
- Wiring document complete
</verification>

<success_criteria>
UltimateRAID is 100% production-ready. All RAID levels work with real parity and rebuild. Wiring document complete.
</success_criteria>

<output>
After completion, create `.planning/phases/90.5-production-code-review/90.5-13-SUMMARY.md`
</output>
