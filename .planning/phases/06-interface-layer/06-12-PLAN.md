---
phase: 06-interface-layer
plan: 12
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/InstanceArrivalNotificationStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/ConvergenceChoiceDialogStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergeStrategySelectionStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MasterInstanceSelectionStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/SchemaConflictResolutionUIStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergePreviewStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergeProgressTrackingStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergeResultsSummaryStrategy.cs
  - Metadata/TODO.md
autonomous: true

must_haves:
  truths:
    - "Operators are notified when an air-gapped instance arrives and can view pending arrivals"
    - "Operators can preview merge results before executing, seeing records to add/update/delete"
    - "Merge progress is trackable in real-time with percentage completion"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/"
      provides: "8 air-gap convergence UI strategy implementations"
  key_links:
    - from: "Strategies/Convergence/*.cs"
      to: "InterfaceStrategyBase"
      via: "class inheritance"
      pattern: "InterfaceStrategyBase"
---

<objective>
Implement 8 air-gap convergence UI strategies (T109.B11)

Purpose: Provide the complete interface layer for air-gap convergence workflows -- from instance arrival notification through merge strategy selection, conflict resolution, preview, execution tracking, and results summary. These strategies enable operators to safely merge data from air-gapped instances.

Output: 8 strategy files in Strategies/Convergence/ directory, all compiling cleanly.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-interface-layer/06-RESEARCH.md
@.planning/phases/06-interface-layer/06-01-SUMMARY.md
@DataWarehouse.SDK/Contracts/Interface/IInterfaceStrategy.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceStrategyBase.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceCapabilities.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement 8 air-gap convergence UI strategies (B11)</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/InstanceArrivalNotificationStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/ConvergenceChoiceDialogStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergeStrategySelectionStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MasterInstanceSelectionStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/SchemaConflictResolutionUIStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergePreviewStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergeProgressTrackingStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Convergence/MergeResultsSummaryStrategy.cs
  </files>
  <action>
Create 8 strategy files in the Convergence/ subdirectory. Each extends InterfaceStrategyBase and implements IPluginInterfaceStrategy. These strategies provide the interface layer for T123/T124 air-gap convergence workflows.

**InstanceArrivalNotificationStrategy** (StrategyId: "instance-arrival-notification"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: POST /convergence/notify receives air-gapped instance arrival, GET /convergence/pending lists pending arrivals

**ConvergenceChoiceDialogStrategy** (StrategyId: "convergence-choice-dialog"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: GET /convergence/{instanceId}/choice returns dialog data (keep separate vs merge), POST records decision

**MergeStrategySelectionStrategy** (StrategyId: "merge-strategy-selection"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: GET /convergence/{instanceId}/strategies lists merge strategies (last-write-wins, manual, field-level), POST selects strategy

**MasterInstanceSelectionStrategy** (StrategyId: "master-instance-selection"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: GET /convergence/{instanceId}/instances lists eligible masters, POST selects master instance

**SchemaConflictResolutionUIStrategy** (StrategyId: "schema-conflict-resolution"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: GET /convergence/{instanceId}/conflicts lists schema conflicts with per-field diff, POST resolves individual or batch conflicts

**MergePreviewStrategy** (StrategyId: "merge-preview"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: GET /convergence/{instanceId}/preview returns merge preview (records to add/update/delete, conflicts remaining), dry-run mode

**MergeProgressTrackingStrategy** (StrategyId: "merge-progress"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: POST /convergence/{instanceId}/execute starts merge, GET /convergence/{instanceId}/progress returns progress percentage

**MergeResultsSummaryStrategy** (StrategyId: "merge-results-summary"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: GET /convergence/{instanceId}/results returns post-merge summary (records merged, conflicts resolved, time taken)

All strategies include XML docs, are internal sealed classes, use message bus for DataWarehouse operations.
  </action>
  <verify>
`dotnet build Plugins/DataWarehouse.Plugins.UltimateInterface/DataWarehouse.Plugins.UltimateInterface.csproj` -- zero errors.
Verify 8 .cs files exist in Strategies/Convergence/.
  </verify>
  <done>8 convergence strategies implemented covering full air-gap merge workflow from notification through results summary.</done>
</task>

<task type="auto">
  <name>Task 2: Mark T109.B11 complete in TODO.md</name>
  <files>Metadata/TODO.md</files>
  <action>Find lines `| 109.B11.1 |` through `| 109.B11.8 |` and change `[ ]` to `[x]`.</action>
  <verify>Grep TODO.md for `109.B11` -- all 8 should show `[x]`.</verify>
  <done>T109.B11.1-B11.8 marked [x] in TODO.md.</done>
</task>

</tasks>

<verification>
- `dotnet build` passes with zero errors
- 8 Convergence strategy files exist and extend InterfaceStrategyBase
- T109.B11.1-B11.8 marked [x]
</verification>

<success_criteria>
8 convergence strategies are production-ready providing a complete air-gap merge workflow: arrival notification, choice dialog, strategy selection, master selection, conflict resolution, preview, progress tracking, and results summary.
</success_criteria>

<output>
After completion, create `.planning/phases/06-interface-layer/06-12-SUMMARY.md`
</output>
