---
phase: 06-interface-layer
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/RestInterfaceStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/OpenApiStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/JsonApiStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/HateoasStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/ODataStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/FalcorStrategy.cs
  - Metadata/TODO.md
autonomous: true

must_haves:
  truths:
    - "6 REST strategies exist and compile with production-ready request handling"
    - "Each strategy implements IPluginInterfaceStrategy and extends InterfaceStrategyBase"
    - "Each strategy handles at minimum GET/POST/PUT/DELETE operations via HandleRequestAsyncCore"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/"
      provides: "6 REST protocol strategy implementations"
  key_links:
    - from: "Strategies/REST/*.cs"
      to: "InterfaceStrategyBase"
      via: "class inheritance"
      pattern: "InterfaceStrategyBase"
---

<objective>
Implement 6 REST protocol strategies (T109.B2)

Purpose: Provide production-ready REST API interface strategies for exposing DataWarehouse operations via standard HTTP protocols including REST, OpenAPI auto-generation, JSON:API, HATEOAS, OData, and Falcor.

Output: 6 strategy files in Strategies/REST/ directory, all compiling cleanly.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-interface-layer/06-RESEARCH.md
@.planning/phases/06-interface-layer/06-01-SUMMARY.md
@DataWarehouse.SDK/Contracts/Interface/IInterfaceStrategy.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceStrategyBase.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceCapabilities.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceTypes.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement 6 REST strategies in Strategies/REST/ directory</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/RestInterfaceStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/OpenApiStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/JsonApiStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/HateoasStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/ODataStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/REST/FalcorStrategy.cs
  </files>
  <action>
Create 6 REST strategy files. Each must:
- Extend InterfaceStrategyBase from SDK (provides lifecycle, request handling, disposal)
- Implement IPluginInterfaceStrategy (from 06-01 refactor) for metadata fields
- Have production-ready HandleRequestAsyncCore with real request routing logic
- Use InterfaceCapabilities.CreateRestDefaults() or custom SDK InterfaceCapabilities
- Follow the established pattern from research (see 06-RESEARCH.md Pattern 2 and 3)

**RestInterfaceStrategy** (StrategyId: "rest"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: Parse Method (GET/POST/PUT/DELETE/PATCH), route via Path, return JSON responses
- Content negotiation: Support JSON and XML based on Accept header
- Support query parameters for filtering/pagination
- Error mapping: 400 for bad requests, 404 for not found, 500 for internal errors

**OpenApiStrategy** (StrategyId: "openapi"):
- Protocol: InterfaceProtocol.REST
- Auto-generates OpenAPI v3.1 JSON document describing available endpoints
- HandleRequestAsync: Serve /openapi.json with auto-generated spec including paths, schemas, and responses
- Introspect registered strategies to build paths dynamically

**JsonApiStrategy** (StrategyId: "jsonapi"):
- Protocol: InterfaceProtocol.REST
- Implements JSON:API specification (https://jsonapi.org)
- HandleRequestAsync: Wrap responses in JSON:API envelope (data, type, id, attributes, relationships, links)
- Support compound documents, sparse fieldsets, sorting, pagination via query params

**HateoasStrategy** (StrategyId: "hateoas"):
- Protocol: InterfaceProtocol.REST
- Adds hypermedia controls (_links) to all responses
- HandleRequestAsync: Append navigation links (self, next, prev, related) to response JSON
- Build link relations dynamically based on resource type and available operations

**ODataStrategy** (StrategyId: "odata"):
- Protocol: InterfaceProtocol.REST
- Implement OData query syntax: $filter, $select, $orderby, $top, $skip, $count, $expand
- HandleRequestAsync: Parse OData query options from URL, apply to data query, return results
- Support OData metadata document at /$metadata

**FalcorStrategy** (StrategyId: "falcor"):
- Protocol: InterfaceProtocol.REST
- Implement Netflix Falcor JSON Graph model
- HandleRequestAsync: Parse JSON Graph paths from request, resolve via message bus, return JSON Graph response
- Support get, set, call operations

All strategies must:
- Use message bus to route data operations (not direct data access)
- Handle errors gracefully with protocol-appropriate error responses
- Include full XML documentation
- Be internal sealed classes in DataWarehouse.Plugins.UltimateInterface namespace
  </action>
  <verify>
`dotnet build Plugins/DataWarehouse.Plugins.UltimateInterface/DataWarehouse.Plugins.UltimateInterface.csproj` -- zero errors.
Verify 6 .cs files exist in Strategies/REST/ directory.
  </verify>
  <done>
6 REST strategies implemented with production-ready request handling, JSON/XML content negotiation, error mapping, and message bus integration.
  </done>
</task>

<task type="auto">
  <name>Task 2: Mark T109.B2 complete in TODO.md</name>
  <files>Metadata/TODO.md</files>
  <action>
Update TODO.md:
- Find lines containing `| 109.B2.1 |` through `| 109.B2.6 |` and change `[ ]` to `[x]`
  </action>
  <verify>Grep TODO.md for `109.B2` -- all 6 should show `[x]`.</verify>
  <done>T109.B2.1-B2.6 marked [x] in TODO.md.</done>
</task>

</tasks>

<verification>
- `dotnet build` passes with zero errors
- 6 REST strategy files exist and extend InterfaceStrategyBase
- T109.B2.1-B2.6 marked [x] in TODO.md
</verification>

<success_criteria>
6 REST interface strategies are production-ready with real request handling logic, content negotiation, and message bus integration. All compile cleanly.
</success_criteria>

<output>
After completion, create `.planning/phases/06-interface-layer/06-02-SUMMARY.md`
</output>
