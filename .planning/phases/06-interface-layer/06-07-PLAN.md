---
phase: 06-interface-layer
plan: 07
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/SlackChannelStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/TeamsChannelStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/DiscordChannelStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/AlexaChannelStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/GoogleAssistantChannelStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/SiriChannelStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/ChatGptPluginStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/ClaudeMcpStrategy.cs
  - Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/GenericWebhookStrategy.cs
  - Metadata/TODO.md
autonomous: true

must_haves:
  truths:
    - "9 conversational strategies exist and compile with production-ready channel integration"
    - "Slack/Teams/Discord strategies implement platform-specific webhook and event handling"
    - "Claude MCP strategy implements Model Context Protocol with tools, resources, and prompts"
    - "GenericWebhook strategy provides catch-all webhook integration with HMAC verification"
  artifacts:
    - path: "Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/"
      provides: "9 conversational platform strategy implementations"
  key_links:
    - from: "Strategies/Conversational/*.cs"
      to: "InterfaceStrategyBase"
      via: "class inheritance"
      pattern: "InterfaceStrategyBase"
---

<objective>
Implement 9 conversational interface strategies (T109.B7)

Purpose: Provide production-ready conversational interface strategies enabling natural interaction with DataWarehouse through chat platforms (Slack, Teams, Discord), voice assistants (Alexa, Google Assistant, Siri), AI plugins (ChatGPT, Claude MCP), and generic webhooks.

Output: 9 strategy files in Strategies/Conversational/ directory, all compiling cleanly.
</objective>

<execution_context>
@C:/Users/ddamien/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/ddamien/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-interface-layer/06-RESEARCH.md
@.planning/phases/06-interface-layer/06-01-SUMMARY.md
@DataWarehouse.SDK/Contracts/Interface/IInterfaceStrategy.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceStrategyBase.cs
@DataWarehouse.SDK/Contracts/Interface/InterfaceCapabilities.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement 9 conversational strategies in Strategies/Conversational/ directory</name>
  <files>
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/SlackChannelStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/TeamsChannelStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/DiscordChannelStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/AlexaChannelStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/GoogleAssistantChannelStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/SiriChannelStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/ChatGptPluginStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/ClaudeMcpStrategy.cs
    Plugins/DataWarehouse.Plugins.UltimateInterface/Strategies/Conversational/GenericWebhookStrategy.cs
  </files>
  <action>
Create 9 conversational strategy files. Each extends InterfaceStrategyBase and implements IPluginInterfaceStrategy.

**SlackChannelStrategy** (StrategyId: "slack"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Process Slack Events API payloads:
  - URL verification challenge (respond with challenge value)
  - Message events: extract text, user, channel, thread_ts, route via message bus for NLP intent parsing
  - Slash commands: parse command + arguments, dispatch to DataWarehouse operations
  - Interactive components: handle block actions, modal submissions
- Build Slack Block Kit responses (sections, actions, context blocks)
- Verify request signatures using Slack signing secret (X-Slack-Signature, X-Slack-Request-Timestamp)

**TeamsChannelStrategy** (StrategyId: "teams"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Process Bot Framework Activity objects:
  - Message activities: extract text, from, conversation, route for NLP
  - Invoke activities: handle adaptive card actions, task module fetch/submit
  - ConversationUpdate: handle member added/removed events
- Build Adaptive Card JSON responses for rich interactive content
- Validate JWT token in Authorization header against Microsoft identity

**DiscordChannelStrategy** (StrategyId: "discord"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Process Discord Interaction payloads:
  - PING (type 1): respond with PONG for webhook verification
  - APPLICATION_COMMAND (type 2): parse slash command, dispatch operation
  - MESSAGE_COMPONENT (type 3): handle button clicks, select menus
  - MODAL_SUBMIT (type 5): handle modal form submissions
- Build Discord embed responses with fields, colors, thumbnails
- Verify request signature using Ed25519 (X-Signature-Ed25519, X-Signature-Timestamp)

**AlexaChannelStrategy** (StrategyId: "alexa"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Process Alexa Skill request envelope:
  - LaunchRequest: welcome message with reprompt
  - IntentRequest: map intent name + slot values to DataWarehouse operations
  - SessionEndedRequest: cleanup session state
- Build SSML speech responses with card content
- Support dialog delegation for multi-turn conversations
- Verify request signature and timestamp (reject if >150s old)

**GoogleAssistantChannelStrategy** (StrategyId: "google-assistant"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Process Actions on Google webhook requests:
  - Parse intent from webhook request body (handler name, parameters)
  - Map parameters to DataWarehouse query operations
  - Support rich responses (simple, card, table, media, list)
- Build webhook response with prompt (firstSimple, content, suggestions)
- Support account linking for authenticated queries

**SiriChannelStrategy** (StrategyId: "siri"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Process SiriKit-style intent requests:
  - Parse intent type and parameters from JSON body
  - Map to DataWarehouse operations (search, query, status check)
  - Return SiriKit-compatible response with dialog and snippet
- Support intent resolution (confirm, handle lifecycle)
- Support Shortcuts integration via parameter definitions

**ChatGptPluginStrategy** (StrategyId: "chatgpt-plugin"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: Implement OpenAI ChatGPT Plugin spec:
  - GET /.well-known/ai-plugin.json: serve plugin manifest (name, description, auth, api)
  - GET /openapi.yaml: serve OpenAPI spec for plugin endpoints
  - POST /query: accept natural language query, route to DataWarehouse via NLP intent, return structured results
  - POST /action: execute DataWarehouse operation from ChatGPT action
- Support service-level authentication (bearer token in manifest)

**ClaudeMcpStrategy** (StrategyId: "claude-mcp"):
- Protocol: InterfaceProtocol.Custom
- HandleRequestAsync: Implement MCP server protocol:
  - initialize: return server capabilities (tools, resources, prompts)
  - tools/list: enumerate DataWarehouse operations as MCP tools
  - tools/call: execute tool by name with arguments, return content (text/image)
  - resources/list: list available DataWarehouse resources
  - resources/read: read resource by URI
  - prompts/list: list available prompt templates
  - prompts/get: get prompt template with arguments
- Support JSON-RPC 2.0 message framing
- Support SSE transport for streaming responses

**GenericWebhookStrategy** (StrategyId: "webhook"):
- Protocol: InterfaceProtocol.REST
- HandleRequestAsync: Universal webhook receiver:
  - Accept any HTTP POST with JSON/form body
  - Extract event type from configurable header (X-Event-Type, X-Webhook-Event) or body field
  - Map event type to DataWarehouse operation via configurable routing table
  - Support HMAC signature verification (X-Hub-Signature-256 pattern)
  - Return 200 OK with optional response body
- Support retry detection (X-Webhook-Retry header)
- Support webhook delivery (POST to registered URLs on DataWarehouse events)

All strategies use message bus for NLP intent parsing and DataWarehouse operations, handle platform authentication, include XML docs. All are internal sealed classes.
  </action>
  <verify>
`dotnet build Plugins/DataWarehouse.Plugins.UltimateInterface/DataWarehouse.Plugins.UltimateInterface.csproj` -- zero errors.
Verify 9 .cs files exist in Strategies/Conversational/.
  </verify>
  <done>9 conversational strategies implemented with platform-specific event handling, authentication, and rich response formatting.</done>
</task>

<task type="auto">
  <name>Task 2: Mark T109.B7 complete in TODO.md</name>
  <files>Metadata/TODO.md</files>
  <action>Find lines `| 109.B7.1 |` through `| 109.B7.9 |` and change `[ ]` to `[x]`.</action>
  <verify>Grep TODO.md for `109.B7` -- all 9 should show `[x]`.</verify>
  <done>T109.B7.1-B7.9 marked [x] in TODO.md.</done>
</task>

</tasks>

<verification>
- `dotnet build` passes with zero errors
- 9 conversational strategy files exist and extend InterfaceStrategyBase
- T109.B7.1-B7.9 marked [x]
</verification>

<success_criteria>
9 conversational strategies are production-ready with platform-specific authentication, event processing, and rich response formatting for chat, voice, AI, and webhook channels.
</success_criteria>

<output>
After completion, create `.planning/phases/06-interface-layer/06-07-SUMMARY.md`
</output>
