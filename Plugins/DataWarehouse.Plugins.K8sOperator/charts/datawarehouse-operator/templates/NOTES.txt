Thank you for installing {{ .Chart.Name }}!

Your release is named {{ .Release.Name }}.

1. Get the operator status:

   kubectl get pods -l "app.kubernetes.io/name={{ include "datawarehouse-operator.name" . }},app.kubernetes.io/instance={{ .Release.Name }}" -n {{ .Release.Namespace }}

2. Check the operator logs:

   kubectl logs -l "app.kubernetes.io/name={{ include "datawarehouse-operator.name" . }},app.kubernetes.io/instance={{ .Release.Name }}" -n {{ .Release.Namespace }} -f

3. Create a DataWarehouse cluster:

   cat <<EOF | kubectl apply -f -
   apiVersion: datawarehouse.io/v1
   kind: DataWarehouseCluster
   metadata:
     name: my-datawarehouse
     namespace: default
   spec:
     replicas: 3
     version: "{{ .Chart.AppVersion }}"
     storageClass: standard
     storageSize: 10Gi
   EOF

4. List DataWarehouse clusters:

   kubectl get datawarehouseclusters -A

5. Get cluster status:

   kubectl describe datawarehousecluster my-datawarehouse

{{- if .Values.metrics.enabled }}

6. Access Prometheus metrics:

   kubectl port-forward svc/{{ include "datawarehouse-operator.fullname" . }}-metrics {{ .Values.metrics.service.port }}:{{ .Values.metrics.service.port }} -n {{ .Release.Namespace }}

   Then visit: http://localhost:{{ .Values.metrics.service.port }}/metrics

{{- end }}

{{- if .Values.metrics.serviceMonitor.enabled }}

7. ServiceMonitor is enabled for Prometheus Operator integration.
   Ensure you have Prometheus Operator installed and the ServiceMonitor will be discovered.

{{- end }}

For more information, visit: {{ .Chart.Home }}

IMPORTANT NOTES:

- The operator requires cluster-admin level permissions to manage all DataWarehouse resources
- CRDs are installed {{ if .Values.crds.install }}automatically{{ else }}separately{{ end }}
- Leader election is {{ if .Values.leaderElection.enabled }}enabled{{ else }}disabled{{ end }}
- The operator watches {{ if .Values.crds.install }}all namespaces{{ else }}only the release namespace{{ end }}

To uninstall the chart:

   helm uninstall {{ .Release.Name }} -n {{ .Release.Namespace }}

{{ if .Values.crds.keep }}
NOTE: CRDs are preserved on uninstall to prevent accidental data loss.
To remove CRDs manually:

   kubectl delete crd datawarehouseclusters.datawarehouse.io
   kubectl delete crd datawarehousebackups.datawarehouse.io
   kubectl delete crd datawarehousestorages.datawarehouse.io
{{ end }}
